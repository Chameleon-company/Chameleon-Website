{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useRef, useState, useCallback, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport omit from 'lodash/omit';\nimport pick from 'lodash/pick';\nimport isNil from 'lodash/isNil';\nimport isFunction from 'lodash/isFunction';\nimport shallowEqual from '../utils/shallowEqual';\nimport DropdownMenu from './DropdownMenu';\nimport { findNodeOfTree, flattenTree, getNodeParents } from '../utils/treeUtils';\nimport { usePaths } from './utils';\nimport { getSafeRegExpString, createChainedFunction, mergeRefs, useControlled, useCustom, useClassNames } from '../utils';\nimport { PickerToggle, PickerOverlay, SearchBar, PickerToggleTrigger, usePickerClassName, usePublicMethods, useToggleKeyDownEvent, useFocusItemValue, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\nvar emptyArray = [];\nvar Cascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$as = props.as,\n      Component = _props$as === void 0 ? 'div' : _props$as,\n      _props$data = props.data,\n      data = _props$data === void 0 ? emptyArray : _props$data,\n      _props$classPrefix = props.classPrefix,\n      classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n      _props$childrenKey = props.childrenKey,\n      childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\n      _props$valueKey = props.valueKey,\n      valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n      _props$labelKey = props.labelKey,\n      labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\n      defaultValue = props.defaultValue,\n      placeholder = props.placeholder,\n      disabled = props.disabled,\n      _props$disabledItemVa = props.disabledItemValues,\n      disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\n      _props$appearance = props.appearance,\n      appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n      _props$cleanable = props.cleanable,\n      cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n      overrideLocale = props.locale,\n      toggleAs = props.toggleAs,\n      style = props.style,\n      valueProp = props.value,\n      inline = props.inline,\n      menuClassName = props.menuClassName,\n      menuStyle = props.menuStyle,\n      menuWidth = props.menuWidth,\n      menuHeight = props.menuHeight,\n      _props$searchable = props.searchable,\n      searchable = _props$searchable === void 0 ? true : _props$searchable,\n      parentSelectable = props.parentSelectable,\n      _props$placement = props.placement,\n      placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n      id = props.id,\n      renderMenuItem = props.renderMenuItem,\n      renderSearchItem = props.renderSearchItem,\n      renderValue = props.renderValue,\n      renderMenu = props.renderMenu,\n      renderExtraFooter = props.renderExtraFooter,\n      onEnter = props.onEnter,\n      onExited = props.onExited,\n      onClean = props.onClean,\n      onChange = props.onChange,\n      onSelect = props.onSelect,\n      onSearch = props.onSearch,\n      onClose = props.onClose,\n      onOpen = props.onOpen,\n      getChildren = props.getChildren,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"classPrefix\", \"childrenKey\", \"valueKey\", \"labelKey\", \"defaultValue\", \"placeholder\", \"disabled\", \"disabledItemValues\", \"appearance\", \"cleanable\", \"locale\", \"toggleAs\", \"style\", \"value\", \"inline\", \"menuClassName\", \"menuStyle\", \"menuWidth\", \"menuHeight\", \"searchable\", \"parentSelectable\", \"placement\", \"id\", \"renderMenuItem\", \"renderSearchItem\", \"renderValue\", \"renderMenu\", \"renderExtraFooter\", \"onEnter\", \"onExited\", \"onClean\", \"onChange\", \"onSelect\", \"onSearch\", \"onClose\", \"onOpen\", \"getChildren\"]); // Use component active state to support keyboard events.\n\n\n  var _useState = useState(false),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useState2 = useState(flattenTree(data, childrenKey)),\n      flattenData = _useState2[0],\n      setFlattenData = _useState2[1];\n\n  var triggerRef = useRef(null);\n  var overlayRef = useRef(null);\n  var targetRef = useRef(null);\n  var searchInputRef = useRef(null);\n\n  var _ref = useControlled(valueProp, defaultValue),\n      value = _ref[0],\n      setValue = _ref[1];\n\n  var _usePaths = usePaths({\n    data: data,\n    valueKey: valueKey,\n    childrenKey: childrenKey,\n    value: value\n  }),\n      selectedPaths = _usePaths.selectedPaths,\n      valueToPaths = _usePaths.valueToPaths,\n      columnData = _usePaths.columnData,\n      addColumn = _usePaths.addColumn,\n      setValueToPaths = _usePaths.setValueToPaths,\n      setColumnData = _usePaths.setColumnData,\n      setSelectedPaths = _usePaths.setSelectedPaths,\n      enforceUpdate = _usePaths.enforceUpdate;\n\n  useEffect(function () {\n    setFlattenData(flattenTree(data, childrenKey));\n  }, [data, childrenKey]);\n  usePublicMethods(ref, {\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef\n  });\n\n  var _useCustom = useCustom('Picker', overrideLocale),\n      locale = _useCustom.locale,\n      rtl = _useCustom.rtl;\n  /**\r\n   * 1.Have a value and the value is valid.\r\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\r\n   */\n\n\n  var hasValue = valueToPaths.length > 0 || !isNil(value) && isFunction(renderValue);\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var _useState3 = useState(''),\n      searchKeyword = _useState3[0],\n      setSearchKeyword = _useState3[1];\n\n  var someKeyword = useCallback(function (item, keyword) {\n    if (item[labelKey].match(new RegExp(getSafeRegExpString(keyword || searchKeyword), 'i'))) {\n      return true;\n    }\n\n    if (item.parent && someKeyword(item.parent)) {\n      return true;\n    }\n\n    return false;\n  }, [labelKey, searchKeyword]);\n  var getSearchResult = useCallback(function (keyword) {\n    var items = [];\n    var result = flattenData.filter(function (item) {\n      if (!parentSelectable && item[childrenKey]) {\n        return false;\n      }\n\n      return someKeyword(item, keyword);\n    });\n\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]); // A maximum of 100 search results are returned.\n\n      if (i === 99) {\n        return items;\n      }\n    }\n\n    return items;\n  }, [childrenKey, flattenData, someKeyword, parentSelectable]); // Used to hover the focuse item  when trigger `onKeydown`\n\n  var _useFocusItemValue = useFocusItemValue(value, {\n    rtl: rtl,\n    data: flattenData,\n    valueKey: valueKey,\n    defaultLayer: valueToPaths !== null && valueToPaths !== void 0 && valueToPaths.length ? valueToPaths.length - 1 : 0,\n    target: function target() {\n      return overlayRef.current;\n    },\n    callback: useCallback(function (value) {\n      enforceUpdate(value, true);\n    }, [enforceUpdate])\n  }),\n      focusItemValue = _useFocusItemValue.focusItemValue,\n      setFocusItemValue = _useFocusItemValue.setFocusItemValue,\n      setLayer = _useFocusItemValue.setLayer,\n      setKeys = _useFocusItemValue.setKeys,\n      onFocusItem = _useFocusItemValue.onKeyDown;\n\n  var handleSearch = useCallback(function (value, event) {\n    var items = getSearchResult(value);\n    setSearchKeyword(value);\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\n\n    if (items.length > 0) {\n      setFocusItemValue(items[0][valueKey]);\n      setLayer(0);\n      setKeys([]);\n    }\n  }, [getSearchResult, onSearch, setFocusItemValue, setKeys, setLayer, valueKey]);\n  var handleEntered = useCallback(function () {\n    if (!targetRef.current) {\n      return;\n    }\n\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  }, [onOpen]);\n  var handleExited = useCallback(function () {\n    if (!targetRef.current) {\n      return;\n    }\n\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n    setActive(false);\n    setSearchKeyword('');\n  }, [onClose]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current;\n\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : _triggerRef$current.close();\n  }, [triggerRef]);\n  var handleClean = useCallback(function (event) {\n    if (disabled || !targetRef.current) {\n      return;\n    }\n\n    setColumnData([data]);\n    setValue(null);\n    setSelectedPaths([]);\n    setValueToPaths([]);\n    onChange === null || onChange === void 0 ? void 0 : onChange(null, event);\n  }, [data, disabled, onChange, setSelectedPaths, setColumnData, setValueToPaths, setValue]);\n  var handleMenuPressEnter = useCallback(function (event) {\n    var focusItem = findNodeOfTree(data, function (item) {\n      return item[valueKey] === focusItemValue;\n    });\n    var isLeafNode = focusItem && !focusItem[childrenKey];\n\n    if (isLeafNode) {\n      setValue(focusItemValue);\n      setValueToPaths(selectedPaths);\n\n      if (selectedPaths.length) {\n        setLayer(selectedPaths.length - 1);\n      }\n\n      if (!shallowEqual(value, focusItemValue)) {\n        onChange === null || onChange === void 0 ? void 0 : onChange(focusItemValue !== null && focusItemValue !== void 0 ? focusItemValue : null, event);\n      }\n\n      handleClose();\n    }\n  }, [childrenKey, data, focusItemValue, handleClose, onChange, selectedPaths, setLayer, setValue, setValueToPaths, value, valueKey]);\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    searchInputRef: searchInputRef,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: onFocusItem,\n    onMenuPressEnter: handleMenuPressEnter\n  }, rest));\n\n  var handleSelect = function handleSelect(node, cascadePaths, isLeafNode, event) {\n    var _node$childrenKey, _node$childrenKey2, _triggerRef$current2;\n\n    var nextValue = node[valueKey];\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadePaths, event);\n    setSelectedPaths(cascadePaths); // Lazy load node's children\n\n    if (typeof getChildren === 'function' && ((_node$childrenKey = node[childrenKey]) === null || _node$childrenKey === void 0 ? void 0 : _node$childrenKey.length) === 0) {\n      node.loading = true;\n      var children = getChildren(node);\n\n      if (children instanceof Promise) {\n        children.then(function (data) {\n          node.loading = false;\n          node[childrenKey] = data;\n\n          if (targetRef.current) {\n            addColumn(data, cascadePaths.length);\n          }\n        });\n      } else {\n        node.loading = false;\n        node[childrenKey] = children;\n        addColumn(children, cascadePaths.length);\n      }\n    } else if ((_node$childrenKey2 = node[childrenKey]) !== null && _node$childrenKey2 !== void 0 && _node$childrenKey2.length) {\n      addColumn(node[childrenKey], cascadePaths.length);\n    }\n\n    if (isLeafNode) {\n      // Determines whether the option is a leaf node, and if so, closes the picker.\n      handleClose(); // Update the selected path to the value path.\n      // That is, the selected path will be displayed on the button after clicking the child node.\n\n      setValueToPaths(cascadePaths);\n      setValue(nextValue);\n\n      if (!shallowEqual(value, nextValue)) {\n        onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n      }\n\n      return;\n    }\n    /** When the parent is optional, the value and the displayed path are updated. */\n\n\n    if (parentSelectable && !shallowEqual(value, nextValue)) {\n      setValue(nextValue);\n      onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n      setValueToPaths(cascadePaths);\n    } // Update menu position\n\n\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : _triggerRef$current2.updatePosition();\n  };\n  /**\r\n   * The search structure option is processed after being selected.\r\n   */\n\n\n  var handleSearchRowSelect = function handleSearchRowSelect(node, nodes, event) {\n    var nextValue = node[valueKey];\n    handleClose();\n    setSearchKeyword('');\n    setValue(nextValue);\n    setValueToPaths(nodes);\n    enforceUpdate(nextValue);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, nodes, event);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n  };\n\n  var renderSearchRow = function renderSearchRow(item, key) {\n    var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n    var nodes = getNodeParents(item);\n    nodes.push(item);\n    var formattedNodes = nodes.map(function (node) {\n      var _extends2;\n\n      var labelElements = [];\n      var a = node[labelKey].split(regx);\n      var b = node[labelKey].match(regx);\n\n      for (var i = 0; i < a.length; i++) {\n        labelElements.push(a[i]);\n\n        if (b && b[i]) {\n          labelElements.push( /*#__PURE__*/React.createElement(\"span\", {\n            key: i,\n            className: prefix('cascader-search-match')\n          }, b[i]));\n        }\n      }\n\n      return _extends({}, node, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2));\n    });\n    var disabled = disabledItemValues.some(function (value) {\n      return formattedNodes.some(function (node) {\n        return node[valueKey] === value;\n      });\n    });\n    var itemClasses = prefix('cascader-row', {\n      'cascader-row-disabled': disabled,\n      'cascader-row-focus': item[valueKey] === focusItemValue\n    });\n    var label = formattedNodes.map(function (node, index) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: \"col-\" + index,\n        className: prefix('cascader-col')\n      }, node[labelKey]);\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: key,\n      \"aria-disabled\": disabled,\n      \"data-key\": item[valueKey],\n      className: itemClasses,\n      onClick: function onClick(event) {\n        if (!disabled) {\n          handleSearchRowSelect(item, nodes, event);\n        }\n      }\n    }, renderSearchItem ? renderSearchItem(label, nodes) : label);\n  };\n\n  var renderSearchResultPanel = function renderSearchResultPanel() {\n    if (searchKeyword === '') {\n      return null;\n    }\n\n    var items = getSearchResult();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('cascader-search-panel'),\n      \"data-layer\": 0\n    }, items.length ? items.map(renderSearchRow) : /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('none')\n    }, locale.noResultsText));\n  };\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var _ref2 = positionProps || {},\n        left = _ref2.left,\n        top = _ref2.top,\n        className = _ref2.className;\n\n    var styles = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var classes = merge(className, menuClassName, prefix('cascader-menu', {\n      inline: inline\n    }));\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      ref: mergeRefs(overlayRef, speakerRef),\n      className: classes,\n      style: styles,\n      target: triggerRef,\n      onKeyDown: onPickerKeyDown\n    }, searchable && /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeyword,\n      inputRef: searchInputRef\n    }), renderSearchResultPanel(), searchKeyword === '' && /*#__PURE__*/React.createElement(DropdownMenu, {\n      id: id ? id + \"-listbox\" : undefined,\n      menuWidth: menuWidth,\n      menuHeight: menuHeight,\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      classPrefix: 'picker-cascader-menu',\n      cascadeData: columnData,\n      cascadePaths: selectedPaths,\n      activeItemValue: value,\n      onSelect: handleSelect,\n      renderMenu: renderMenu,\n      renderMenuItem: renderMenuItem\n    }), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  var selectedElement = placeholder;\n\n  if (valueToPaths.length > 0) {\n    selectedElement = [];\n    valueToPaths.forEach(function (item, index) {\n      var key = item[valueKey] || item[labelKey];\n      selectedElement.push( /*#__PURE__*/React.createElement(\"span\", {\n        key: key\n      }, item[labelKey]));\n\n      if (index < valueToPaths.length - 1) {\n        selectedElement.push( /*#__PURE__*/React.createElement(\"span\", {\n          className: \"separator\",\n          key: key + \"-separator\"\n        }, ' / '));\n      }\n    });\n  }\n\n  if (!isNil(value) && isFunction(renderValue)) {\n    selectedElement = renderValue(value, valueToPaths, selectedElement); // If renderValue returns null or undefined, hasValue is false.\n\n    if (isNil(selectedElement)) {\n      hasValue = false;\n    }\n  }\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    classPrefix: classPrefix,\n    hasValue: hasValue,\n    name: 'cascader',\n    appearance: appearance,\n    cleanable: cleanable\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1]; // TODO: bad api design\n  //       consider an isolated Menu component\n\n\n  if (inline) {\n    return renderDropdownMenu();\n  }\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEntered: createChainedFunction(handleEntered, onEnter),\n    onExited: createChainedFunction(handleExited, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    id: id,\n    ref: targetRef,\n    as: toggleAs,\n    appearance: appearance,\n    disabled: disabled,\n    onClean: createChainedFunction(handleClean, onClean),\n    onKeyDown: onPickerKeyDown,\n    cleanable: cleanable && !disabled,\n    hasValue: hasValue,\n    active: active,\n    placement: placement,\n    inputValue: value !== null && value !== void 0 ? value : ''\n  }), selectedElement || (locale === null || locale === void 0 ? void 0 : locale.placeholder))));\n});\nCascader.displayName = 'Cascader';\nCascader.propTypes = _extends({}, listPickerPropTypes, {\n  disabledItemValues: PropTypes.array,\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  renderMenu: PropTypes.func,\n  onSelect: PropTypes.func,\n  onSearch: PropTypes.func,\n  cleanable: PropTypes.bool,\n  renderMenuItem: PropTypes.func,\n  renderSearchItem: PropTypes.func,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  searchable: PropTypes.bool,\n  inline: PropTypes.bool,\n  parentSelectable: PropTypes.bool\n});\nexport default Cascader;","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","React","useRef","useState","useCallback","useEffect","PropTypes","omit","pick","isNil","isFunction","shallowEqual","DropdownMenu","findNodeOfTree","flattenTree","getNodeParents","usePaths","getSafeRegExpString","createChainedFunction","mergeRefs","useControlled","useCustom","useClassNames","PickerToggle","PickerOverlay","SearchBar","PickerToggleTrigger","usePickerClassName","usePublicMethods","useToggleKeyDownEvent","useFocusItemValue","pickTriggerPropKeys","omitTriggerPropKeys","listPickerPropTypes","emptyArray","Cascader","forwardRef","props","ref","_props$as","as","Component","_props$data","data","_props$classPrefix","classPrefix","_props$childrenKey","childrenKey","_props$valueKey","valueKey","_props$labelKey","labelKey","defaultValue","placeholder","disabled","_props$disabledItemVa","disabledItemValues","_props$appearance","appearance","_props$cleanable","cleanable","overrideLocale","locale","toggleAs","style","valueProp","value","inline","menuClassName","menuStyle","menuWidth","menuHeight","_props$searchable","searchable","parentSelectable","_props$placement","placement","id","renderMenuItem","renderSearchItem","renderValue","renderMenu","renderExtraFooter","onEnter","onExited","onClean","onChange","onSelect","onSearch","onClose","onOpen","getChildren","rest","_useState","active","setActive","_useState2","flattenData","setFlattenData","triggerRef","overlayRef","targetRef","searchInputRef","_ref","setValue","_usePaths","selectedPaths","valueToPaths","columnData","addColumn","setValueToPaths","setColumnData","setSelectedPaths","enforceUpdate","_useCustom","rtl","hasValue","length","_useClassNames","prefix","merge","_useState3","searchKeyword","setSearchKeyword","someKeyword","item","keyword","match","RegExp","parent","getSearchResult","items","result","filter","i","push","_useFocusItemValue","defaultLayer","target","current","callback","focusItemValue","setFocusItemValue","setLayer","setKeys","onFocusItem","onKeyDown","handleSearch","event","handleEntered","handleExited","handleClose","_triggerRef$current","close","handleClean","handleMenuPressEnter","focusItem","isLeafNode","onPickerKeyDown","toggle","onExit","onMenuKeyDown","onMenuPressEnter","handleSelect","node","cascadePaths","_node$childrenKey","_node$childrenKey2","_triggerRef$current2","nextValue","loading","children","Promise","then","updatePosition","handleSearchRowSelect","nodes","renderSearchRow","key","regx","formattedNodes","map","_extends2","labelElements","a","split","b","createElement","className","some","itemClasses","label","index","onClick","renderSearchResultPanel","noResultsText","renderDropdownMenu","positionProps","speakerRef","_ref2","left","top","styles","classes","searchPlaceholder","inputRef","undefined","cascadeData","activeItemValue","selectedElement","forEach","_usePickerClassName","name","usedClassNamePropKeys","pickerProps","onEntered","speaker","concat","inputValue","displayName","propTypes","array","any","oneOf","func","bool","number","oneOfType","string"],"sources":["C:/Users/jaink/OneDrive/Desktop/New folder (4)/chameleon-website/node_modules/rsuite/esm/Cascader/Cascader.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\r\nimport React, { useRef, useState, useCallback, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport omit from 'lodash/omit';\r\nimport pick from 'lodash/pick';\r\nimport isNil from 'lodash/isNil';\r\nimport isFunction from 'lodash/isFunction';\r\nimport shallowEqual from '../utils/shallowEqual';\r\nimport DropdownMenu from './DropdownMenu';\r\nimport { findNodeOfTree, flattenTree, getNodeParents } from '../utils/treeUtils';\r\nimport { usePaths } from './utils';\r\nimport { getSafeRegExpString, createChainedFunction, mergeRefs, useControlled, useCustom, useClassNames } from '../utils';\r\nimport { PickerToggle, PickerOverlay, SearchBar, PickerToggleTrigger, usePickerClassName, usePublicMethods, useToggleKeyDownEvent, useFocusItemValue, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../Picker';\r\nvar emptyArray = [];\r\nvar Cascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\r\n  var _props$as = props.as,\r\n      Component = _props$as === void 0 ? 'div' : _props$as,\r\n      _props$data = props.data,\r\n      data = _props$data === void 0 ? emptyArray : _props$data,\r\n      _props$classPrefix = props.classPrefix,\r\n      classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\r\n      _props$childrenKey = props.childrenKey,\r\n      childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\r\n      _props$valueKey = props.valueKey,\r\n      valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\r\n      _props$labelKey = props.labelKey,\r\n      labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\r\n      defaultValue = props.defaultValue,\r\n      placeholder = props.placeholder,\r\n      disabled = props.disabled,\r\n      _props$disabledItemVa = props.disabledItemValues,\r\n      disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\r\n      _props$appearance = props.appearance,\r\n      appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\r\n      _props$cleanable = props.cleanable,\r\n      cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\r\n      overrideLocale = props.locale,\r\n      toggleAs = props.toggleAs,\r\n      style = props.style,\r\n      valueProp = props.value,\r\n      inline = props.inline,\r\n      menuClassName = props.menuClassName,\r\n      menuStyle = props.menuStyle,\r\n      menuWidth = props.menuWidth,\r\n      menuHeight = props.menuHeight,\r\n      _props$searchable = props.searchable,\r\n      searchable = _props$searchable === void 0 ? true : _props$searchable,\r\n      parentSelectable = props.parentSelectable,\r\n      _props$placement = props.placement,\r\n      placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\r\n      id = props.id,\r\n      renderMenuItem = props.renderMenuItem,\r\n      renderSearchItem = props.renderSearchItem,\r\n      renderValue = props.renderValue,\r\n      renderMenu = props.renderMenu,\r\n      renderExtraFooter = props.renderExtraFooter,\r\n      onEnter = props.onEnter,\r\n      onExited = props.onExited,\r\n      onClean = props.onClean,\r\n      onChange = props.onChange,\r\n      onSelect = props.onSelect,\r\n      onSearch = props.onSearch,\r\n      onClose = props.onClose,\r\n      onOpen = props.onOpen,\r\n      getChildren = props.getChildren,\r\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"classPrefix\", \"childrenKey\", \"valueKey\", \"labelKey\", \"defaultValue\", \"placeholder\", \"disabled\", \"disabledItemValues\", \"appearance\", \"cleanable\", \"locale\", \"toggleAs\", \"style\", \"value\", \"inline\", \"menuClassName\", \"menuStyle\", \"menuWidth\", \"menuHeight\", \"searchable\", \"parentSelectable\", \"placement\", \"id\", \"renderMenuItem\", \"renderSearchItem\", \"renderValue\", \"renderMenu\", \"renderExtraFooter\", \"onEnter\", \"onExited\", \"onClean\", \"onChange\", \"onSelect\", \"onSearch\", \"onClose\", \"onOpen\", \"getChildren\"]); // Use component active state to support keyboard events.\r\n\r\n\r\n  var _useState = useState(false),\r\n      active = _useState[0],\r\n      setActive = _useState[1];\r\n\r\n  var _useState2 = useState(flattenTree(data, childrenKey)),\r\n      flattenData = _useState2[0],\r\n      setFlattenData = _useState2[1];\r\n\r\n  var triggerRef = useRef(null);\r\n  var overlayRef = useRef(null);\r\n  var targetRef = useRef(null);\r\n  var searchInputRef = useRef(null);\r\n\r\n  var _ref = useControlled(valueProp, defaultValue),\r\n      value = _ref[0],\r\n      setValue = _ref[1];\r\n\r\n  var _usePaths = usePaths({\r\n    data: data,\r\n    valueKey: valueKey,\r\n    childrenKey: childrenKey,\r\n    value: value\r\n  }),\r\n      selectedPaths = _usePaths.selectedPaths,\r\n      valueToPaths = _usePaths.valueToPaths,\r\n      columnData = _usePaths.columnData,\r\n      addColumn = _usePaths.addColumn,\r\n      setValueToPaths = _usePaths.setValueToPaths,\r\n      setColumnData = _usePaths.setColumnData,\r\n      setSelectedPaths = _usePaths.setSelectedPaths,\r\n      enforceUpdate = _usePaths.enforceUpdate;\r\n\r\n  useEffect(function () {\r\n    setFlattenData(flattenTree(data, childrenKey));\r\n  }, [data, childrenKey]);\r\n  usePublicMethods(ref, {\r\n    triggerRef: triggerRef,\r\n    overlayRef: overlayRef,\r\n    targetRef: targetRef\r\n  });\r\n\r\n  var _useCustom = useCustom('Picker', overrideLocale),\r\n      locale = _useCustom.locale,\r\n      rtl = _useCustom.rtl;\r\n  /**\r\n   * 1.Have a value and the value is valid.\r\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\r\n   */\r\n\r\n\r\n  var hasValue = valueToPaths.length > 0 || !isNil(value) && isFunction(renderValue);\r\n\r\n  var _useClassNames = useClassNames(classPrefix),\r\n      prefix = _useClassNames.prefix,\r\n      merge = _useClassNames.merge;\r\n\r\n  var _useState3 = useState(''),\r\n      searchKeyword = _useState3[0],\r\n      setSearchKeyword = _useState3[1];\r\n\r\n  var someKeyword = useCallback(function (item, keyword) {\r\n    if (item[labelKey].match(new RegExp(getSafeRegExpString(keyword || searchKeyword), 'i'))) {\r\n      return true;\r\n    }\r\n\r\n    if (item.parent && someKeyword(item.parent)) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }, [labelKey, searchKeyword]);\r\n  var getSearchResult = useCallback(function (keyword) {\r\n    var items = [];\r\n    var result = flattenData.filter(function (item) {\r\n      if (!parentSelectable && item[childrenKey]) {\r\n        return false;\r\n      }\r\n\r\n      return someKeyword(item, keyword);\r\n    });\r\n\r\n    for (var i = 0; i < result.length; i++) {\r\n      items.push(result[i]); // A maximum of 100 search results are returned.\r\n\r\n      if (i === 99) {\r\n        return items;\r\n      }\r\n    }\r\n\r\n    return items;\r\n  }, [childrenKey, flattenData, someKeyword, parentSelectable]); // Used to hover the focuse item  when trigger `onKeydown`\r\n\r\n  var _useFocusItemValue = useFocusItemValue(value, {\r\n    rtl: rtl,\r\n    data: flattenData,\r\n    valueKey: valueKey,\r\n    defaultLayer: valueToPaths !== null && valueToPaths !== void 0 && valueToPaths.length ? valueToPaths.length - 1 : 0,\r\n    target: function target() {\r\n      return overlayRef.current;\r\n    },\r\n    callback: useCallback(function (value) {\r\n      enforceUpdate(value, true);\r\n    }, [enforceUpdate])\r\n  }),\r\n      focusItemValue = _useFocusItemValue.focusItemValue,\r\n      setFocusItemValue = _useFocusItemValue.setFocusItemValue,\r\n      setLayer = _useFocusItemValue.setLayer,\r\n      setKeys = _useFocusItemValue.setKeys,\r\n      onFocusItem = _useFocusItemValue.onKeyDown;\r\n\r\n  var handleSearch = useCallback(function (value, event) {\r\n    var items = getSearchResult(value);\r\n    setSearchKeyword(value);\r\n    onSearch === null || onSearch === void 0 ? void 0 : onSearch(value, event);\r\n\r\n    if (items.length > 0) {\r\n      setFocusItemValue(items[0][valueKey]);\r\n      setLayer(0);\r\n      setKeys([]);\r\n    }\r\n  }, [getSearchResult, onSearch, setFocusItemValue, setKeys, setLayer, valueKey]);\r\n  var handleEntered = useCallback(function () {\r\n    if (!targetRef.current) {\r\n      return;\r\n    }\r\n\r\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\r\n    setActive(true);\r\n  }, [onOpen]);\r\n  var handleExited = useCallback(function () {\r\n    if (!targetRef.current) {\r\n      return;\r\n    }\r\n\r\n    onClose === null || onClose === void 0 ? void 0 : onClose();\r\n    setActive(false);\r\n    setSearchKeyword('');\r\n  }, [onClose]);\r\n  var handleClose = useCallback(function () {\r\n    var _triggerRef$current;\r\n\r\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : _triggerRef$current.close();\r\n  }, [triggerRef]);\r\n  var handleClean = useCallback(function (event) {\r\n    if (disabled || !targetRef.current) {\r\n      return;\r\n    }\r\n\r\n    setColumnData([data]);\r\n    setValue(null);\r\n    setSelectedPaths([]);\r\n    setValueToPaths([]);\r\n    onChange === null || onChange === void 0 ? void 0 : onChange(null, event);\r\n  }, [data, disabled, onChange, setSelectedPaths, setColumnData, setValueToPaths, setValue]);\r\n  var handleMenuPressEnter = useCallback(function (event) {\r\n    var focusItem = findNodeOfTree(data, function (item) {\r\n      return item[valueKey] === focusItemValue;\r\n    });\r\n    var isLeafNode = focusItem && !focusItem[childrenKey];\r\n\r\n    if (isLeafNode) {\r\n      setValue(focusItemValue);\r\n      setValueToPaths(selectedPaths);\r\n\r\n      if (selectedPaths.length) {\r\n        setLayer(selectedPaths.length - 1);\r\n      }\r\n\r\n      if (!shallowEqual(value, focusItemValue)) {\r\n        onChange === null || onChange === void 0 ? void 0 : onChange(focusItemValue !== null && focusItemValue !== void 0 ? focusItemValue : null, event);\r\n      }\r\n\r\n      handleClose();\r\n    }\r\n  }, [childrenKey, data, focusItemValue, handleClose, onChange, selectedPaths, setLayer, setValue, setValueToPaths, value, valueKey]);\r\n  var onPickerKeyDown = useToggleKeyDownEvent(_extends({\r\n    toggle: !focusItemValue || !active,\r\n    triggerRef: triggerRef,\r\n    targetRef: targetRef,\r\n    overlayRef: overlayRef,\r\n    searchInputRef: searchInputRef,\r\n    active: active,\r\n    onExit: handleClean,\r\n    onMenuKeyDown: onFocusItem,\r\n    onMenuPressEnter: handleMenuPressEnter\r\n  }, rest));\r\n\r\n  var handleSelect = function handleSelect(node, cascadePaths, isLeafNode, event) {\r\n    var _node$childrenKey, _node$childrenKey2, _triggerRef$current2;\r\n\r\n    var nextValue = node[valueKey];\r\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, cascadePaths, event);\r\n    setSelectedPaths(cascadePaths); // Lazy load node's children\r\n\r\n    if (typeof getChildren === 'function' && ((_node$childrenKey = node[childrenKey]) === null || _node$childrenKey === void 0 ? void 0 : _node$childrenKey.length) === 0) {\r\n      node.loading = true;\r\n      var children = getChildren(node);\r\n\r\n      if (children instanceof Promise) {\r\n        children.then(function (data) {\r\n          node.loading = false;\r\n          node[childrenKey] = data;\r\n\r\n          if (targetRef.current) {\r\n            addColumn(data, cascadePaths.length);\r\n          }\r\n        });\r\n      } else {\r\n        node.loading = false;\r\n        node[childrenKey] = children;\r\n        addColumn(children, cascadePaths.length);\r\n      }\r\n    } else if ((_node$childrenKey2 = node[childrenKey]) !== null && _node$childrenKey2 !== void 0 && _node$childrenKey2.length) {\r\n      addColumn(node[childrenKey], cascadePaths.length);\r\n    }\r\n\r\n    if (isLeafNode) {\r\n      // Determines whether the option is a leaf node, and if so, closes the picker.\r\n      handleClose(); // Update the selected path to the value path.\r\n      // That is, the selected path will be displayed on the button after clicking the child node.\r\n\r\n      setValueToPaths(cascadePaths);\r\n      setValue(nextValue);\r\n\r\n      if (!shallowEqual(value, nextValue)) {\r\n        onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\r\n      }\r\n\r\n      return;\r\n    }\r\n    /** When the parent is optional, the value and the displayed path are updated. */\r\n\r\n\r\n    if (parentSelectable && !shallowEqual(value, nextValue)) {\r\n      setValue(nextValue);\r\n      onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\r\n      setValueToPaths(cascadePaths);\r\n    } // Update menu position\r\n\r\n\r\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : _triggerRef$current2.updatePosition();\r\n  };\r\n  /**\r\n   * The search structure option is processed after being selected.\r\n   */\r\n\r\n\r\n  var handleSearchRowSelect = function handleSearchRowSelect(node, nodes, event) {\r\n    var nextValue = node[valueKey];\r\n    handleClose();\r\n    setSearchKeyword('');\r\n    setValue(nextValue);\r\n    setValueToPaths(nodes);\r\n    enforceUpdate(nextValue);\r\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, nodes, event);\r\n    onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\r\n  };\r\n\r\n  var renderSearchRow = function renderSearchRow(item, key) {\r\n    var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\r\n    var nodes = getNodeParents(item);\r\n    nodes.push(item);\r\n    var formattedNodes = nodes.map(function (node) {\r\n      var _extends2;\r\n\r\n      var labelElements = [];\r\n      var a = node[labelKey].split(regx);\r\n      var b = node[labelKey].match(regx);\r\n\r\n      for (var i = 0; i < a.length; i++) {\r\n        labelElements.push(a[i]);\r\n\r\n        if (b && b[i]) {\r\n          labelElements.push( /*#__PURE__*/React.createElement(\"span\", {\r\n            key: i,\r\n            className: prefix('cascader-search-match')\r\n          }, b[i]));\r\n        }\r\n      }\r\n\r\n      return _extends({}, node, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2));\r\n    });\r\n    var disabled = disabledItemValues.some(function (value) {\r\n      return formattedNodes.some(function (node) {\r\n        return node[valueKey] === value;\r\n      });\r\n    });\r\n    var itemClasses = prefix('cascader-row', {\r\n      'cascader-row-disabled': disabled,\r\n      'cascader-row-focus': item[valueKey] === focusItemValue\r\n    });\r\n    var label = formattedNodes.map(function (node, index) {\r\n      return /*#__PURE__*/React.createElement(\"span\", {\r\n        key: \"col-\" + index,\r\n        className: prefix('cascader-col')\r\n      }, node[labelKey]);\r\n    });\r\n    return /*#__PURE__*/React.createElement(\"div\", {\r\n      key: key,\r\n      \"aria-disabled\": disabled,\r\n      \"data-key\": item[valueKey],\r\n      className: itemClasses,\r\n      onClick: function onClick(event) {\r\n        if (!disabled) {\r\n          handleSearchRowSelect(item, nodes, event);\r\n        }\r\n      }\r\n    }, renderSearchItem ? renderSearchItem(label, nodes) : label);\r\n  };\r\n\r\n  var renderSearchResultPanel = function renderSearchResultPanel() {\r\n    if (searchKeyword === '') {\r\n      return null;\r\n    }\r\n\r\n    var items = getSearchResult();\r\n    return /*#__PURE__*/React.createElement(\"div\", {\r\n      className: prefix('cascader-search-panel'),\r\n      \"data-layer\": 0\r\n    }, items.length ? items.map(renderSearchRow) : /*#__PURE__*/React.createElement(\"div\", {\r\n      className: prefix('none')\r\n    }, locale.noResultsText));\r\n  };\r\n\r\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\r\n    var _ref2 = positionProps || {},\r\n        left = _ref2.left,\r\n        top = _ref2.top,\r\n        className = _ref2.className;\r\n\r\n    var styles = _extends({}, menuStyle, {\r\n      left: left,\r\n      top: top\r\n    });\r\n\r\n    var classes = merge(className, menuClassName, prefix('cascader-menu', {\r\n      inline: inline\r\n    }));\r\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\r\n      ref: mergeRefs(overlayRef, speakerRef),\r\n      className: classes,\r\n      style: styles,\r\n      target: triggerRef,\r\n      onKeyDown: onPickerKeyDown\r\n    }, searchable && /*#__PURE__*/React.createElement(SearchBar, {\r\n      placeholder: locale === null || locale === void 0 ? void 0 : locale.searchPlaceholder,\r\n      onChange: handleSearch,\r\n      value: searchKeyword,\r\n      inputRef: searchInputRef\r\n    }), renderSearchResultPanel(), searchKeyword === '' && /*#__PURE__*/React.createElement(DropdownMenu, {\r\n      id: id ? id + \"-listbox\" : undefined,\r\n      menuWidth: menuWidth,\r\n      menuHeight: menuHeight,\r\n      disabledItemValues: disabledItemValues,\r\n      valueKey: valueKey,\r\n      labelKey: labelKey,\r\n      childrenKey: childrenKey,\r\n      classPrefix: 'picker-cascader-menu',\r\n      cascadeData: columnData,\r\n      cascadePaths: selectedPaths,\r\n      activeItemValue: value,\r\n      onSelect: handleSelect,\r\n      renderMenu: renderMenu,\r\n      renderMenuItem: renderMenuItem\r\n    }), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\r\n  };\r\n\r\n  var selectedElement = placeholder;\r\n\r\n  if (valueToPaths.length > 0) {\r\n    selectedElement = [];\r\n    valueToPaths.forEach(function (item, index) {\r\n      var key = item[valueKey] || item[labelKey];\r\n      selectedElement.push( /*#__PURE__*/React.createElement(\"span\", {\r\n        key: key\r\n      }, item[labelKey]));\r\n\r\n      if (index < valueToPaths.length - 1) {\r\n        selectedElement.push( /*#__PURE__*/React.createElement(\"span\", {\r\n          className: \"separator\",\r\n          key: key + \"-separator\"\r\n        }, ' / '));\r\n      }\r\n    });\r\n  }\r\n\r\n  if (!isNil(value) && isFunction(renderValue)) {\r\n    selectedElement = renderValue(value, valueToPaths, selectedElement); // If renderValue returns null or undefined, hasValue is false.\r\n\r\n    if (isNil(selectedElement)) {\r\n      hasValue = false;\r\n    }\r\n  }\r\n\r\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\r\n    classPrefix: classPrefix,\r\n    hasValue: hasValue,\r\n    name: 'cascader',\r\n    appearance: appearance,\r\n    cleanable: cleanable\r\n  })),\r\n      classes = _usePickerClassName[0],\r\n      usedClassNamePropKeys = _usePickerClassName[1]; // TODO: bad api design\r\n  //       consider an isolated Menu component\r\n\r\n\r\n  if (inline) {\r\n    return renderDropdownMenu();\r\n  }\r\n\r\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\r\n    pickerProps: pick(props, pickTriggerPropKeys),\r\n    ref: triggerRef,\r\n    placement: placement,\r\n    onEntered: createChainedFunction(handleEntered, onEnter),\r\n    onExited: createChainedFunction(handleExited, onExited),\r\n    speaker: renderDropdownMenu\r\n  }, /*#__PURE__*/React.createElement(Component, {\r\n    className: classes,\r\n    style: style\r\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\r\n    id: id,\r\n    ref: targetRef,\r\n    as: toggleAs,\r\n    appearance: appearance,\r\n    disabled: disabled,\r\n    onClean: createChainedFunction(handleClean, onClean),\r\n    onKeyDown: onPickerKeyDown,\r\n    cleanable: cleanable && !disabled,\r\n    hasValue: hasValue,\r\n    active: active,\r\n    placement: placement,\r\n    inputValue: value !== null && value !== void 0 ? value : ''\r\n  }), selectedElement || (locale === null || locale === void 0 ? void 0 : locale.placeholder))));\r\n});\r\nCascader.displayName = 'Cascader';\r\nCascader.propTypes = _extends({}, listPickerPropTypes, {\r\n  disabledItemValues: PropTypes.array,\r\n  locale: PropTypes.any,\r\n  appearance: PropTypes.oneOf(['default', 'subtle']),\r\n  renderMenu: PropTypes.func,\r\n  onSelect: PropTypes.func,\r\n  onSearch: PropTypes.func,\r\n  cleanable: PropTypes.bool,\r\n  renderMenuItem: PropTypes.func,\r\n  renderSearchItem: PropTypes.func,\r\n  menuWidth: PropTypes.number,\r\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n  searchable: PropTypes.bool,\r\n  inline: PropTypes.bool,\r\n  parentSelectable: PropTypes.bool\r\n});\r\nexport default Cascader;"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,OAAOC,6BAAP,MAA0C,yDAA1C;AACA,OAAOC,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,EAAkCC,WAAlC,EAA+CC,SAA/C,QAAgE,OAAhE;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,KAAP,MAAkB,cAAlB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,cAAT,EAAyBC,WAAzB,EAAsCC,cAAtC,QAA4D,oBAA5D;AACA,SAASC,QAAT,QAAyB,SAAzB;AACA,SAASC,mBAAT,EAA8BC,qBAA9B,EAAqDC,SAArD,EAAgEC,aAAhE,EAA+EC,SAA/E,EAA0FC,aAA1F,QAA+G,UAA/G;AACA,SAASC,YAAT,EAAuBC,aAAvB,EAAsCC,SAAtC,EAAiDC,mBAAjD,EAAsEC,kBAAtE,EAA0FC,gBAA1F,EAA4GC,qBAA5G,EAAmIC,iBAAnI,EAAsJC,mBAAtJ,EAA2KC,mBAA3K,EAAgMC,mBAAhM,QAA2N,WAA3N;AACA,IAAIC,UAAU,GAAG,EAAjB;AACA,IAAIC,QAAQ,GAAG,aAAalC,KAAK,CAACmC,UAAN,CAAiB,UAAUC,KAAV,EAAiBC,GAAjB,EAAsB;EACjE,IAAIC,SAAS,GAAGF,KAAK,CAACG,EAAtB;EAAA,IACIC,SAAS,GAAGF,SAAS,KAAK,KAAK,CAAnB,GAAuB,KAAvB,GAA+BA,SAD/C;EAAA,IAEIG,WAAW,GAAGL,KAAK,CAACM,IAFxB;EAAA,IAGIA,IAAI,GAAGD,WAAW,KAAK,KAAK,CAArB,GAAyBR,UAAzB,GAAsCQ,WAHjD;EAAA,IAIIE,kBAAkB,GAAGP,KAAK,CAACQ,WAJ/B;EAAA,IAKIA,WAAW,GAAGD,kBAAkB,KAAK,KAAK,CAA5B,GAAgC,QAAhC,GAA2CA,kBAL7D;EAAA,IAMIE,kBAAkB,GAAGT,KAAK,CAACU,WAN/B;EAAA,IAOIA,WAAW,GAAGD,kBAAkB,KAAK,KAAK,CAA5B,GAAgC,UAAhC,GAA6CA,kBAP/D;EAAA,IAQIE,eAAe,GAAGX,KAAK,CAACY,QAR5B;EAAA,IASIA,QAAQ,GAAGD,eAAe,KAAK,KAAK,CAAzB,GAA6B,OAA7B,GAAuCA,eATtD;EAAA,IAUIE,eAAe,GAAGb,KAAK,CAACc,QAV5B;EAAA,IAWIA,QAAQ,GAAGD,eAAe,KAAK,KAAK,CAAzB,GAA6B,OAA7B,GAAuCA,eAXtD;EAAA,IAYIE,YAAY,GAAGf,KAAK,CAACe,YAZzB;EAAA,IAaIC,WAAW,GAAGhB,KAAK,CAACgB,WAbxB;EAAA,IAcIC,QAAQ,GAAGjB,KAAK,CAACiB,QAdrB;EAAA,IAeIC,qBAAqB,GAAGlB,KAAK,CAACmB,kBAflC;EAAA,IAgBIA,kBAAkB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmCrB,UAAnC,GAAgDqB,qBAhBzE;EAAA,IAiBIE,iBAAiB,GAAGpB,KAAK,CAACqB,UAjB9B;EAAA,IAkBIA,UAAU,GAAGD,iBAAiB,KAAK,KAAK,CAA3B,GAA+B,SAA/B,GAA2CA,iBAlB5D;EAAA,IAmBIE,gBAAgB,GAAGtB,KAAK,CAACuB,SAnB7B;EAAA,IAoBIA,SAAS,GAAGD,gBAAgB,KAAK,KAAK,CAA1B,GAA8B,IAA9B,GAAqCA,gBApBrD;EAAA,IAqBIE,cAAc,GAAGxB,KAAK,CAACyB,MArB3B;EAAA,IAsBIC,QAAQ,GAAG1B,KAAK,CAAC0B,QAtBrB;EAAA,IAuBIC,KAAK,GAAG3B,KAAK,CAAC2B,KAvBlB;EAAA,IAwBIC,SAAS,GAAG5B,KAAK,CAAC6B,KAxBtB;EAAA,IAyBIC,MAAM,GAAG9B,KAAK,CAAC8B,MAzBnB;EAAA,IA0BIC,aAAa,GAAG/B,KAAK,CAAC+B,aA1B1B;EAAA,IA2BIC,SAAS,GAAGhC,KAAK,CAACgC,SA3BtB;EAAA,IA4BIC,SAAS,GAAGjC,KAAK,CAACiC,SA5BtB;EAAA,IA6BIC,UAAU,GAAGlC,KAAK,CAACkC,UA7BvB;EAAA,IA8BIC,iBAAiB,GAAGnC,KAAK,CAACoC,UA9B9B;EAAA,IA+BIA,UAAU,GAAGD,iBAAiB,KAAK,KAAK,CAA3B,GAA+B,IAA/B,GAAsCA,iBA/BvD;EAAA,IAgCIE,gBAAgB,GAAGrC,KAAK,CAACqC,gBAhC7B;EAAA,IAiCIC,gBAAgB,GAAGtC,KAAK,CAACuC,SAjC7B;EAAA,IAkCIA,SAAS,GAAGD,gBAAgB,KAAK,KAAK,CAA1B,GAA8B,aAA9B,GAA8CA,gBAlC9D;EAAA,IAmCIE,EAAE,GAAGxC,KAAK,CAACwC,EAnCf;EAAA,IAoCIC,cAAc,GAAGzC,KAAK,CAACyC,cApC3B;EAAA,IAqCIC,gBAAgB,GAAG1C,KAAK,CAAC0C,gBArC7B;EAAA,IAsCIC,WAAW,GAAG3C,KAAK,CAAC2C,WAtCxB;EAAA,IAuCIC,UAAU,GAAG5C,KAAK,CAAC4C,UAvCvB;EAAA,IAwCIC,iBAAiB,GAAG7C,KAAK,CAAC6C,iBAxC9B;EAAA,IAyCIC,OAAO,GAAG9C,KAAK,CAAC8C,OAzCpB;EAAA,IA0CIC,QAAQ,GAAG/C,KAAK,CAAC+C,QA1CrB;EAAA,IA2CIC,OAAO,GAAGhD,KAAK,CAACgD,OA3CpB;EAAA,IA4CIC,QAAQ,GAAGjD,KAAK,CAACiD,QA5CrB;EAAA,IA6CIC,QAAQ,GAAGlD,KAAK,CAACkD,QA7CrB;EAAA,IA8CIC,QAAQ,GAAGnD,KAAK,CAACmD,QA9CrB;EAAA,IA+CIC,OAAO,GAAGpD,KAAK,CAACoD,OA/CpB;EAAA,IAgDIC,MAAM,GAAGrD,KAAK,CAACqD,MAhDnB;EAAA,IAiDIC,WAAW,GAAGtD,KAAK,CAACsD,WAjDxB;EAAA,IAkDIC,IAAI,GAAG5F,6BAA6B,CAACqC,KAAD,EAAQ,CAAC,IAAD,EAAO,MAAP,EAAe,aAAf,EAA8B,aAA9B,EAA6C,UAA7C,EAAyD,UAAzD,EAAqE,cAArE,EAAqF,aAArF,EAAoG,UAApG,EAAgH,oBAAhH,EAAsI,YAAtI,EAAoJ,WAApJ,EAAiK,QAAjK,EAA2K,UAA3K,EAAuL,OAAvL,EAAgM,OAAhM,EAAyM,QAAzM,EAAmN,eAAnN,EAAoO,WAApO,EAAiP,WAAjP,EAA8P,YAA9P,EAA4Q,YAA5Q,EAA0R,kBAA1R,EAA8S,WAA9S,EAA2T,IAA3T,EAAiU,gBAAjU,EAAmV,kBAAnV,EAAuW,aAAvW,EAAsX,YAAtX,EAAoY,mBAApY,EAAyZ,SAAzZ,EAAoa,UAApa,EAAgb,SAAhb,EAA2b,UAA3b,EAAuc,UAAvc,EAAmd,UAAnd,EAA+d,SAA/d,EAA0e,QAA1e,EAAof,aAApf,CAAR,CAlDxC,CADiE,CAmDof;;;EAGrjB,IAAIwD,SAAS,GAAG1F,QAAQ,CAAC,KAAD,CAAxB;EAAA,IACI2F,MAAM,GAAGD,SAAS,CAAC,CAAD,CADtB;EAAA,IAEIE,SAAS,GAAGF,SAAS,CAAC,CAAD,CAFzB;;EAIA,IAAIG,UAAU,GAAG7F,QAAQ,CAACW,WAAW,CAAC6B,IAAD,EAAOI,WAAP,CAAZ,CAAzB;EAAA,IACIkD,WAAW,GAAGD,UAAU,CAAC,CAAD,CAD5B;EAAA,IAEIE,cAAc,GAAGF,UAAU,CAAC,CAAD,CAF/B;;EAIA,IAAIG,UAAU,GAAGjG,MAAM,CAAC,IAAD,CAAvB;EACA,IAAIkG,UAAU,GAAGlG,MAAM,CAAC,IAAD,CAAvB;EACA,IAAImG,SAAS,GAAGnG,MAAM,CAAC,IAAD,CAAtB;EACA,IAAIoG,cAAc,GAAGpG,MAAM,CAAC,IAAD,CAA3B;;EAEA,IAAIqG,IAAI,GAAGnF,aAAa,CAAC6C,SAAD,EAAYb,YAAZ,CAAxB;EAAA,IACIc,KAAK,GAAGqC,IAAI,CAAC,CAAD,CADhB;EAAA,IAEIC,QAAQ,GAAGD,IAAI,CAAC,CAAD,CAFnB;;EAIA,IAAIE,SAAS,GAAGzF,QAAQ,CAAC;IACvB2B,IAAI,EAAEA,IADiB;IAEvBM,QAAQ,EAAEA,QAFa;IAGvBF,WAAW,EAAEA,WAHU;IAIvBmB,KAAK,EAAEA;EAJgB,CAAD,CAAxB;EAAA,IAMIwC,aAAa,GAAGD,SAAS,CAACC,aAN9B;EAAA,IAOIC,YAAY,GAAGF,SAAS,CAACE,YAP7B;EAAA,IAQIC,UAAU,GAAGH,SAAS,CAACG,UAR3B;EAAA,IASIC,SAAS,GAAGJ,SAAS,CAACI,SAT1B;EAAA,IAUIC,eAAe,GAAGL,SAAS,CAACK,eAVhC;EAAA,IAWIC,aAAa,GAAGN,SAAS,CAACM,aAX9B;EAAA,IAYIC,gBAAgB,GAAGP,SAAS,CAACO,gBAZjC;EAAA,IAaIC,aAAa,GAAGR,SAAS,CAACQ,aAb9B;;EAeA5G,SAAS,CAAC,YAAY;IACpB6F,cAAc,CAACpF,WAAW,CAAC6B,IAAD,EAAOI,WAAP,CAAZ,CAAd;EACD,CAFQ,EAEN,CAACJ,IAAD,EAAOI,WAAP,CAFM,CAAT;EAGAnB,gBAAgB,CAACU,GAAD,EAAM;IACpB6D,UAAU,EAAEA,UADQ;IAEpBC,UAAU,EAAEA,UAFQ;IAGpBC,SAAS,EAAEA;EAHS,CAAN,CAAhB;;EAMA,IAAIa,UAAU,GAAG7F,SAAS,CAAC,QAAD,EAAWwC,cAAX,CAA1B;EAAA,IACIC,MAAM,GAAGoD,UAAU,CAACpD,MADxB;EAAA,IAEIqD,GAAG,GAAGD,UAAU,CAACC,GAFrB;EAGA;AACF;AACA;AACA;;;EAGE,IAAIC,QAAQ,GAAGT,YAAY,CAACU,MAAb,GAAsB,CAAtB,IAA2B,CAAC5G,KAAK,CAACyD,KAAD,CAAN,IAAiBxD,UAAU,CAACsE,WAAD,CAArE;;EAEA,IAAIsC,cAAc,GAAGhG,aAAa,CAACuB,WAAD,CAAlC;EAAA,IACI0E,MAAM,GAAGD,cAAc,CAACC,MAD5B;EAAA,IAEIC,KAAK,GAAGF,cAAc,CAACE,KAF3B;;EAIA,IAAIC,UAAU,GAAGtH,QAAQ,CAAC,EAAD,CAAzB;EAAA,IACIuH,aAAa,GAAGD,UAAU,CAAC,CAAD,CAD9B;EAAA,IAEIE,gBAAgB,GAAGF,UAAU,CAAC,CAAD,CAFjC;;EAIA,IAAIG,WAAW,GAAGxH,WAAW,CAAC,UAAUyH,IAAV,EAAgBC,OAAhB,EAAyB;IACrD,IAAID,IAAI,CAAC1E,QAAD,CAAJ,CAAe4E,KAAf,CAAqB,IAAIC,MAAJ,CAAW/G,mBAAmB,CAAC6G,OAAO,IAAIJ,aAAZ,CAA9B,EAA0D,GAA1D,CAArB,CAAJ,EAA0F;MACxF,OAAO,IAAP;IACD;;IAED,IAAIG,IAAI,CAACI,MAAL,IAAeL,WAAW,CAACC,IAAI,CAACI,MAAN,CAA9B,EAA6C;MAC3C,OAAO,IAAP;IACD;;IAED,OAAO,KAAP;EACD,CAV4B,EAU1B,CAAC9E,QAAD,EAAWuE,aAAX,CAV0B,CAA7B;EAWA,IAAIQ,eAAe,GAAG9H,WAAW,CAAC,UAAU0H,OAAV,EAAmB;IACnD,IAAIK,KAAK,GAAG,EAAZ;IACA,IAAIC,MAAM,GAAGnC,WAAW,CAACoC,MAAZ,CAAmB,UAAUR,IAAV,EAAgB;MAC9C,IAAI,CAACnD,gBAAD,IAAqBmD,IAAI,CAAC9E,WAAD,CAA7B,EAA4C;QAC1C,OAAO,KAAP;MACD;;MAED,OAAO6E,WAAW,CAACC,IAAD,EAAOC,OAAP,CAAlB;IACD,CANY,CAAb;;IAQA,KAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,MAAM,CAACf,MAA3B,EAAmCiB,CAAC,EAApC,EAAwC;MACtCH,KAAK,CAACI,IAAN,CAAWH,MAAM,CAACE,CAAD,CAAjB,EADsC,CACf;;MAEvB,IAAIA,CAAC,KAAK,EAAV,EAAc;QACZ,OAAOH,KAAP;MACD;IACF;;IAED,OAAOA,KAAP;EACD,CAnBgC,EAmB9B,CAACpF,WAAD,EAAckD,WAAd,EAA2B2B,WAA3B,EAAwClD,gBAAxC,CAnB8B,CAAjC,CA7HiE,CAgJF;;EAE/D,IAAI8D,kBAAkB,GAAG1G,iBAAiB,CAACoC,KAAD,EAAQ;IAChDiD,GAAG,EAAEA,GAD2C;IAEhDxE,IAAI,EAAEsD,WAF0C;IAGhDhD,QAAQ,EAAEA,QAHsC;IAIhDwF,YAAY,EAAE9B,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAK,KAAK,CAA/C,IAAoDA,YAAY,CAACU,MAAjE,GAA0EV,YAAY,CAACU,MAAb,GAAsB,CAAhG,GAAoG,CAJlE;IAKhDqB,MAAM,EAAE,SAASA,MAAT,GAAkB;MACxB,OAAOtC,UAAU,CAACuC,OAAlB;IACD,CAP+C;IAQhDC,QAAQ,EAAExI,WAAW,CAAC,UAAU8D,KAAV,EAAiB;MACrC+C,aAAa,CAAC/C,KAAD,EAAQ,IAAR,CAAb;IACD,CAFoB,EAElB,CAAC+C,aAAD,CAFkB;EAR2B,CAAR,CAA1C;EAAA,IAYI4B,cAAc,GAAGL,kBAAkB,CAACK,cAZxC;EAAA,IAaIC,iBAAiB,GAAGN,kBAAkB,CAACM,iBAb3C;EAAA,IAcIC,QAAQ,GAAGP,kBAAkB,CAACO,QAdlC;EAAA,IAeIC,OAAO,GAAGR,kBAAkB,CAACQ,OAfjC;EAAA,IAgBIC,WAAW,GAAGT,kBAAkB,CAACU,SAhBrC;;EAkBA,IAAIC,YAAY,GAAG/I,WAAW,CAAC,UAAU8D,KAAV,EAAiBkF,KAAjB,EAAwB;IACrD,IAAIjB,KAAK,GAAGD,eAAe,CAAChE,KAAD,CAA3B;IACAyD,gBAAgB,CAACzD,KAAD,CAAhB;IACAsB,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACtB,KAAD,EAAQkF,KAAR,CAA5D;;IAEA,IAAIjB,KAAK,CAACd,MAAN,GAAe,CAAnB,EAAsB;MACpByB,iBAAiB,CAACX,KAAK,CAAC,CAAD,CAAL,CAASlF,QAAT,CAAD,CAAjB;MACA8F,QAAQ,CAAC,CAAD,CAAR;MACAC,OAAO,CAAC,EAAD,CAAP;IACD;EACF,CAV6B,EAU3B,CAACd,eAAD,EAAkB1C,QAAlB,EAA4BsD,iBAA5B,EAA+CE,OAA/C,EAAwDD,QAAxD,EAAkE9F,QAAlE,CAV2B,CAA9B;EAWA,IAAIoG,aAAa,GAAGjJ,WAAW,CAAC,YAAY;IAC1C,IAAI,CAACiG,SAAS,CAACsC,OAAf,EAAwB;MACtB;IACD;;IAEDjD,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,EAAtD;IACAK,SAAS,CAAC,IAAD,CAAT;EACD,CAP8B,EAO5B,CAACL,MAAD,CAP4B,CAA/B;EAQA,IAAI4D,YAAY,GAAGlJ,WAAW,CAAC,YAAY;IACzC,IAAI,CAACiG,SAAS,CAACsC,OAAf,EAAwB;MACtB;IACD;;IAEDlD,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,EAAzD;IACAM,SAAS,CAAC,KAAD,CAAT;IACA4B,gBAAgB,CAAC,EAAD,CAAhB;EACD,CAR6B,EAQ3B,CAAClC,OAAD,CAR2B,CAA9B;EASA,IAAI8D,WAAW,GAAGnJ,WAAW,CAAC,YAAY;IACxC,IAAIoJ,mBAAJ;;IAEA,CAACA,mBAAmB,GAAGrD,UAAU,CAACwC,OAAlC,MAA+C,IAA/C,IAAuDa,mBAAmB,KAAK,KAAK,CAApF,GAAwF,KAAK,CAA7F,GAAiGA,mBAAmB,CAACC,KAApB,EAAjG;EACD,CAJ4B,EAI1B,CAACtD,UAAD,CAJ0B,CAA7B;EAKA,IAAIuD,WAAW,GAAGtJ,WAAW,CAAC,UAAUgJ,KAAV,EAAiB;IAC7C,IAAI9F,QAAQ,IAAI,CAAC+C,SAAS,CAACsC,OAA3B,EAAoC;MAClC;IACD;;IAED5B,aAAa,CAAC,CAACpE,IAAD,CAAD,CAAb;IACA6D,QAAQ,CAAC,IAAD,CAAR;IACAQ,gBAAgB,CAAC,EAAD,CAAhB;IACAF,eAAe,CAAC,EAAD,CAAf;IACAxB,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAAC,IAAD,EAAO8D,KAAP,CAA5D;EACD,CAV4B,EAU1B,CAACzG,IAAD,EAAOW,QAAP,EAAiBgC,QAAjB,EAA2B0B,gBAA3B,EAA6CD,aAA7C,EAA4DD,eAA5D,EAA6EN,QAA7E,CAV0B,CAA7B;EAWA,IAAImD,oBAAoB,GAAGvJ,WAAW,CAAC,UAAUgJ,KAAV,EAAiB;IACtD,IAAIQ,SAAS,GAAG/I,cAAc,CAAC8B,IAAD,EAAO,UAAUkF,IAAV,EAAgB;MACnD,OAAOA,IAAI,CAAC5E,QAAD,CAAJ,KAAmB4F,cAA1B;IACD,CAF6B,CAA9B;IAGA,IAAIgB,UAAU,GAAGD,SAAS,IAAI,CAACA,SAAS,CAAC7G,WAAD,CAAxC;;IAEA,IAAI8G,UAAJ,EAAgB;MACdrD,QAAQ,CAACqC,cAAD,CAAR;MACA/B,eAAe,CAACJ,aAAD,CAAf;;MAEA,IAAIA,aAAa,CAACW,MAAlB,EAA0B;QACxB0B,QAAQ,CAACrC,aAAa,CAACW,MAAd,GAAuB,CAAxB,CAAR;MACD;;MAED,IAAI,CAAC1G,YAAY,CAACuD,KAAD,EAAQ2E,cAAR,CAAjB,EAA0C;QACxCvD,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACuD,cAAc,KAAK,IAAnB,IAA2BA,cAAc,KAAK,KAAK,CAAnD,GAAuDA,cAAvD,GAAwE,IAAzE,EAA+EO,KAA/E,CAA5D;MACD;;MAEDG,WAAW;IACZ;EACF,CApBqC,EAoBnC,CAACxG,WAAD,EAAcJ,IAAd,EAAoBkG,cAApB,EAAoCU,WAApC,EAAiDjE,QAAjD,EAA2DoB,aAA3D,EAA0EqC,QAA1E,EAAoFvC,QAApF,EAA8FM,eAA9F,EAA+G5C,KAA/G,EAAsHjB,QAAtH,CApBmC,CAAtC;EAqBA,IAAI6G,eAAe,GAAGjI,qBAAqB,CAAC9B,QAAQ,CAAC;IACnDgK,MAAM,EAAE,CAAClB,cAAD,IAAmB,CAAC/C,MADuB;IAEnDK,UAAU,EAAEA,UAFuC;IAGnDE,SAAS,EAAEA,SAHwC;IAInDD,UAAU,EAAEA,UAJuC;IAKnDE,cAAc,EAAEA,cALmC;IAMnDR,MAAM,EAAEA,MAN2C;IAOnDkE,MAAM,EAAEN,WAP2C;IAQnDO,aAAa,EAAEhB,WARoC;IASnDiB,gBAAgB,EAAEP;EATiC,CAAD,EAUjD/D,IAViD,CAAT,CAA3C;;EAYA,IAAIuE,YAAY,GAAG,SAASA,YAAT,CAAsBC,IAAtB,EAA4BC,YAA5B,EAA0CR,UAA1C,EAAsDT,KAAtD,EAA6D;IAC9E,IAAIkB,iBAAJ,EAAuBC,kBAAvB,EAA2CC,oBAA3C;;IAEA,IAAIC,SAAS,GAAGL,IAAI,CAACnH,QAAD,CAApB;IACAsC,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAAC6E,IAAD,EAAOC,YAAP,EAAqBjB,KAArB,CAA5D;IACApC,gBAAgB,CAACqD,YAAD,CAAhB,CAL8E,CAK9C;;IAEhC,IAAI,OAAO1E,WAAP,KAAuB,UAAvB,IAAqC,CAAC,CAAC2E,iBAAiB,GAAGF,IAAI,CAACrH,WAAD,CAAzB,MAA4C,IAA5C,IAAoDuH,iBAAiB,KAAK,KAAK,CAA/E,GAAmF,KAAK,CAAxF,GAA4FA,iBAAiB,CAACjD,MAA/G,MAA2H,CAApK,EAAuK;MACrK+C,IAAI,CAACM,OAAL,GAAe,IAAf;MACA,IAAIC,QAAQ,GAAGhF,WAAW,CAACyE,IAAD,CAA1B;;MAEA,IAAIO,QAAQ,YAAYC,OAAxB,EAAiC;QAC/BD,QAAQ,CAACE,IAAT,CAAc,UAAUlI,IAAV,EAAgB;UAC5ByH,IAAI,CAACM,OAAL,GAAe,KAAf;UACAN,IAAI,CAACrH,WAAD,CAAJ,GAAoBJ,IAApB;;UAEA,IAAI0D,SAAS,CAACsC,OAAd,EAAuB;YACrB9B,SAAS,CAAClE,IAAD,EAAO0H,YAAY,CAAChD,MAApB,CAAT;UACD;QACF,CAPD;MAQD,CATD,MASO;QACL+C,IAAI,CAACM,OAAL,GAAe,KAAf;QACAN,IAAI,CAACrH,WAAD,CAAJ,GAAoB4H,QAApB;QACA9D,SAAS,CAAC8D,QAAD,EAAWN,YAAY,CAAChD,MAAxB,CAAT;MACD;IACF,CAlBD,MAkBO,IAAI,CAACkD,kBAAkB,GAAGH,IAAI,CAACrH,WAAD,CAA1B,MAA6C,IAA7C,IAAqDwH,kBAAkB,KAAK,KAAK,CAAjF,IAAsFA,kBAAkB,CAAClD,MAA7G,EAAqH;MAC1HR,SAAS,CAACuD,IAAI,CAACrH,WAAD,CAAL,EAAoBsH,YAAY,CAAChD,MAAjC,CAAT;IACD;;IAED,IAAIwC,UAAJ,EAAgB;MACd;MACAN,WAAW,GAFG,CAEC;MACf;;MAEAzC,eAAe,CAACuD,YAAD,CAAf;MACA7D,QAAQ,CAACiE,SAAD,CAAR;;MAEA,IAAI,CAAC9J,YAAY,CAACuD,KAAD,EAAQuG,SAAR,CAAjB,EAAqC;QACnCnF,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACmF,SAAD,EAAYrB,KAAZ,CAA5D;MACD;;MAED;IACD;IACD;;;IAGA,IAAI1E,gBAAgB,IAAI,CAAC/D,YAAY,CAACuD,KAAD,EAAQuG,SAAR,CAArC,EAAyD;MACvDjE,QAAQ,CAACiE,SAAD,CAAR;MACAnF,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACmF,SAAD,EAAYrB,KAAZ,CAA5D;MACAtC,eAAe,CAACuD,YAAD,CAAf;IACD,CAlD6E,CAkD5E;;;IAGF,CAACG,oBAAoB,GAAGrE,UAAU,CAACwC,OAAnC,MAAgD,IAAhD,IAAwD6B,oBAAoB,KAAK,KAAK,CAAtF,GAA0F,KAAK,CAA/F,GAAmGA,oBAAoB,CAACM,cAArB,EAAnG;EACD,CAtDD;EAuDA;AACF;AACA;;;EAGE,IAAIC,qBAAqB,GAAG,SAASA,qBAAT,CAA+BX,IAA/B,EAAqCY,KAArC,EAA4C5B,KAA5C,EAAmD;IAC7E,IAAIqB,SAAS,GAAGL,IAAI,CAACnH,QAAD,CAApB;IACAsG,WAAW;IACX5B,gBAAgB,CAAC,EAAD,CAAhB;IACAnB,QAAQ,CAACiE,SAAD,CAAR;IACA3D,eAAe,CAACkE,KAAD,CAAf;IACA/D,aAAa,CAACwD,SAAD,CAAb;IACAlF,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAAC6E,IAAD,EAAOY,KAAP,EAAc5B,KAAd,CAA5D;IACA9D,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACmF,SAAD,EAAYrB,KAAZ,CAA5D;EACD,CATD;;EAWA,IAAI6B,eAAe,GAAG,SAASA,eAAT,CAAyBpD,IAAzB,EAA+BqD,GAA/B,EAAoC;IACxD,IAAIC,IAAI,GAAG,IAAInD,MAAJ,CAAW/G,mBAAmB,CAACyG,aAAD,CAA9B,EAA+C,IAA/C,CAAX;IACA,IAAIsD,KAAK,GAAGjK,cAAc,CAAC8G,IAAD,CAA1B;IACAmD,KAAK,CAACzC,IAAN,CAAWV,IAAX;IACA,IAAIuD,cAAc,GAAGJ,KAAK,CAACK,GAAN,CAAU,UAAUjB,IAAV,EAAgB;MAC7C,IAAIkB,SAAJ;;MAEA,IAAIC,aAAa,GAAG,EAApB;MACA,IAAIC,CAAC,GAAGpB,IAAI,CAACjH,QAAD,CAAJ,CAAesI,KAAf,CAAqBN,IAArB,CAAR;MACA,IAAIO,CAAC,GAAGtB,IAAI,CAACjH,QAAD,CAAJ,CAAe4E,KAAf,CAAqBoD,IAArB,CAAR;;MAEA,KAAK,IAAI7C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkD,CAAC,CAACnE,MAAtB,EAA8BiB,CAAC,EAA/B,EAAmC;QACjCiD,aAAa,CAAChD,IAAd,CAAmBiD,CAAC,CAAClD,CAAD,CAApB;;QAEA,IAAIoD,CAAC,IAAIA,CAAC,CAACpD,CAAD,CAAV,EAAe;UACbiD,aAAa,CAAChD,IAAd,EAAoB,aAAatI,KAAK,CAAC0L,aAAN,CAAoB,MAApB,EAA4B;YAC3DT,GAAG,EAAE5C,CADsD;YAE3DsD,SAAS,EAAErE,MAAM,CAAC,uBAAD;UAF0C,CAA5B,EAG9BmE,CAAC,CAACpD,CAAD,CAH6B,CAAjC;QAID;MACF;;MAED,OAAOvI,QAAQ,CAAC,EAAD,EAAKqK,IAAL,GAAYkB,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAACnI,QAAD,CAAT,GAAsBoI,aAAtC,EAAqDD,SAAjE,EAAf;IACD,CAnBoB,CAArB;IAoBA,IAAIhI,QAAQ,GAAGE,kBAAkB,CAACqI,IAAnB,CAAwB,UAAU3H,KAAV,EAAiB;MACtD,OAAOkH,cAAc,CAACS,IAAf,CAAoB,UAAUzB,IAAV,EAAgB;QACzC,OAAOA,IAAI,CAACnH,QAAD,CAAJ,KAAmBiB,KAA1B;MACD,CAFM,CAAP;IAGD,CAJc,CAAf;IAKA,IAAI4H,WAAW,GAAGvE,MAAM,CAAC,cAAD,EAAiB;MACvC,yBAAyBjE,QADc;MAEvC,sBAAsBuE,IAAI,CAAC5E,QAAD,CAAJ,KAAmB4F;IAFF,CAAjB,CAAxB;IAIA,IAAIkD,KAAK,GAAGX,cAAc,CAACC,GAAf,CAAmB,UAAUjB,IAAV,EAAgB4B,KAAhB,EAAuB;MACpD,OAAO,aAAa/L,KAAK,CAAC0L,aAAN,CAAoB,MAApB,EAA4B;QAC9CT,GAAG,EAAE,SAASc,KADgC;QAE9CJ,SAAS,EAAErE,MAAM,CAAC,cAAD;MAF6B,CAA5B,EAGjB6C,IAAI,CAACjH,QAAD,CAHa,CAApB;IAID,CALW,CAAZ;IAMA,OAAO,aAAalD,KAAK,CAAC0L,aAAN,CAAoB,KAApB,EAA2B;MAC7CT,GAAG,EAAEA,GADwC;MAE7C,iBAAiB5H,QAF4B;MAG7C,YAAYuE,IAAI,CAAC5E,QAAD,CAH6B;MAI7C2I,SAAS,EAAEE,WAJkC;MAK7CG,OAAO,EAAE,SAASA,OAAT,CAAiB7C,KAAjB,EAAwB;QAC/B,IAAI,CAAC9F,QAAL,EAAe;UACbyH,qBAAqB,CAAClD,IAAD,EAAOmD,KAAP,EAAc5B,KAAd,CAArB;QACD;MACF;IAT4C,CAA3B,EAUjBrE,gBAAgB,GAAGA,gBAAgB,CAACgH,KAAD,EAAQf,KAAR,CAAnB,GAAoCe,KAVnC,CAApB;EAWD,CAlDD;;EAoDA,IAAIG,uBAAuB,GAAG,SAASA,uBAAT,GAAmC;IAC/D,IAAIxE,aAAa,KAAK,EAAtB,EAA0B;MACxB,OAAO,IAAP;IACD;;IAED,IAAIS,KAAK,GAAGD,eAAe,EAA3B;IACA,OAAO,aAAajI,KAAK,CAAC0L,aAAN,CAAoB,KAApB,EAA2B;MAC7CC,SAAS,EAAErE,MAAM,CAAC,uBAAD,CAD4B;MAE7C,cAAc;IAF+B,CAA3B,EAGjBY,KAAK,CAACd,MAAN,GAAec,KAAK,CAACkD,GAAN,CAAUJ,eAAV,CAAf,GAA4C,aAAahL,KAAK,CAAC0L,aAAN,CAAoB,KAApB,EAA2B;MACrFC,SAAS,EAAErE,MAAM,CAAC,MAAD;IADoE,CAA3B,EAEzDzD,MAAM,CAACqI,aAFkD,CAHxC,CAApB;EAMD,CAZD;;EAcA,IAAIC,kBAAkB,GAAG,SAASA,kBAAT,CAA4BC,aAA5B,EAA2CC,UAA3C,EAAuD;IAC9E,IAAIC,KAAK,GAAGF,aAAa,IAAI,EAA7B;IAAA,IACIG,IAAI,GAAGD,KAAK,CAACC,IADjB;IAAA,IAEIC,GAAG,GAAGF,KAAK,CAACE,GAFhB;IAAA,IAGIb,SAAS,GAAGW,KAAK,CAACX,SAHtB;;IAKA,IAAIc,MAAM,GAAG3M,QAAQ,CAAC,EAAD,EAAKsE,SAAL,EAAgB;MACnCmI,IAAI,EAAEA,IAD6B;MAEnCC,GAAG,EAAEA;IAF8B,CAAhB,CAArB;;IAKA,IAAIE,OAAO,GAAGnF,KAAK,CAACoE,SAAD,EAAYxH,aAAZ,EAA2BmD,MAAM,CAAC,eAAD,EAAkB;MACpEpD,MAAM,EAAEA;IAD4D,CAAlB,CAAjC,CAAnB;IAGA,OAAO,aAAalE,KAAK,CAAC0L,aAAN,CAAoBnK,aAApB,EAAmC;MACrDc,GAAG,EAAEnB,SAAS,CAACiF,UAAD,EAAakG,UAAb,CADuC;MAErDV,SAAS,EAAEe,OAF0C;MAGrD3I,KAAK,EAAE0I,MAH8C;MAIrDhE,MAAM,EAAEvC,UAJ6C;MAKrD+C,SAAS,EAAEY;IAL0C,CAAnC,EAMjBrF,UAAU,IAAI,aAAaxE,KAAK,CAAC0L,aAAN,CAAoBlK,SAApB,EAA+B;MAC3D4B,WAAW,EAAES,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAAC8I,iBADT;MAE3DtH,QAAQ,EAAE6D,YAFiD;MAG3DjF,KAAK,EAAEwD,aAHoD;MAI3DmF,QAAQ,EAAEvG;IAJiD,CAA/B,CANV,EAWhB4F,uBAAuB,EAXP,EAWWxE,aAAa,KAAK,EAAlB,IAAwB,aAAazH,KAAK,CAAC0L,aAAN,CAAoB/K,YAApB,EAAkC;MACpGiE,EAAE,EAAEA,EAAE,GAAGA,EAAE,GAAG,UAAR,GAAqBiI,SADyE;MAEpGxI,SAAS,EAAEA,SAFyF;MAGpGC,UAAU,EAAEA,UAHwF;MAIpGf,kBAAkB,EAAEA,kBAJgF;MAKpGP,QAAQ,EAAEA,QAL0F;MAMpGE,QAAQ,EAAEA,QAN0F;MAOpGJ,WAAW,EAAEA,WAPuF;MAQpGF,WAAW,EAAE,sBARuF;MASpGkK,WAAW,EAAEnG,UATuF;MAUpGyD,YAAY,EAAE3D,aAVsF;MAWpGsG,eAAe,EAAE9I,KAXmF;MAYpGqB,QAAQ,EAAE4E,YAZ0F;MAapGlF,UAAU,EAAEA,UAbwF;MAcpGH,cAAc,EAAEA;IAdoF,CAAlC,CAXhD,EA0BhBI,iBAAiB,KAAK,IAAtB,IAA8BA,iBAAiB,KAAK,KAAK,CAAzD,GAA6D,KAAK,CAAlE,GAAsEA,iBAAiB,EA1BvE,CAApB;EA2BD,CAzCD;;EA2CA,IAAI+H,eAAe,GAAG5J,WAAtB;;EAEA,IAAIsD,YAAY,CAACU,MAAb,GAAsB,CAA1B,EAA6B;IAC3B4F,eAAe,GAAG,EAAlB;IACAtG,YAAY,CAACuG,OAAb,CAAqB,UAAUrF,IAAV,EAAgBmE,KAAhB,EAAuB;MAC1C,IAAId,GAAG,GAAGrD,IAAI,CAAC5E,QAAD,CAAJ,IAAkB4E,IAAI,CAAC1E,QAAD,CAAhC;MACA8J,eAAe,CAAC1E,IAAhB,EAAsB,aAAatI,KAAK,CAAC0L,aAAN,CAAoB,MAApB,EAA4B;QAC7DT,GAAG,EAAEA;MADwD,CAA5B,EAEhCrD,IAAI,CAAC1E,QAAD,CAF4B,CAAnC;;MAIA,IAAI6I,KAAK,GAAGrF,YAAY,CAACU,MAAb,GAAsB,CAAlC,EAAqC;QACnC4F,eAAe,CAAC1E,IAAhB,EAAsB,aAAatI,KAAK,CAAC0L,aAAN,CAAoB,MAApB,EAA4B;UAC7DC,SAAS,EAAE,WADkD;UAE7DV,GAAG,EAAEA,GAAG,GAAG;QAFkD,CAA5B,EAGhC,KAHgC,CAAnC;MAID;IACF,CAZD;EAaD;;EAED,IAAI,CAACzK,KAAK,CAACyD,KAAD,CAAN,IAAiBxD,UAAU,CAACsE,WAAD,CAA/B,EAA8C;IAC5CiI,eAAe,GAAGjI,WAAW,CAACd,KAAD,EAAQyC,YAAR,EAAsBsG,eAAtB,CAA7B,CAD4C,CACyB;;IAErE,IAAIxM,KAAK,CAACwM,eAAD,CAAT,EAA4B;MAC1B7F,QAAQ,GAAG,KAAX;IACD;EACF;;EAED,IAAI+F,mBAAmB,GAAGxL,kBAAkB,CAAC5B,QAAQ,CAAC,EAAD,EAAKsC,KAAL,EAAY;IAC/DQ,WAAW,EAAEA,WADkD;IAE/DuE,QAAQ,EAAEA,QAFqD;IAG/DgG,IAAI,EAAE,UAHyD;IAI/D1J,UAAU,EAAEA,UAJmD;IAK/DE,SAAS,EAAEA;EALoD,CAAZ,CAAT,CAA5C;EAAA,IAOI+I,OAAO,GAAGQ,mBAAmB,CAAC,CAAD,CAPjC;EAAA,IAQIE,qBAAqB,GAAGF,mBAAmB,CAAC,CAAD,CAR/C,CAhciE,CAwcb;EACpD;;;EAGA,IAAIhJ,MAAJ,EAAY;IACV,OAAOiI,kBAAkB,EAAzB;EACD;;EAED,OAAO,aAAanM,KAAK,CAAC0L,aAAN,CAAoBjK,mBAApB,EAAyC;IAC3D4L,WAAW,EAAE9M,IAAI,CAAC6B,KAAD,EAAQN,mBAAR,CAD0C;IAE3DO,GAAG,EAAE6D,UAFsD;IAG3DvB,SAAS,EAAEA,SAHgD;IAI3D2I,SAAS,EAAErM,qBAAqB,CAACmI,aAAD,EAAgBlE,OAAhB,CAJ2B;IAK3DC,QAAQ,EAAElE,qBAAqB,CAACoI,YAAD,EAAelE,QAAf,CAL4B;IAM3DoI,OAAO,EAAEpB;EANkD,CAAzC,EAOjB,aAAanM,KAAK,CAAC0L,aAAN,CAAoBlJ,SAApB,EAA+B;IAC7CmJ,SAAS,EAAEe,OADkC;IAE7C3I,KAAK,EAAEA;EAFsC,CAA/B,EAGb,aAAa/D,KAAK,CAAC0L,aAAN,CAAoBpK,YAApB,EAAkCxB,QAAQ,CAAC,EAAD,EAAKQ,IAAI,CAACqF,IAAD,EAAO,GAAG6H,MAAH,CAAUzL,mBAAV,EAA+BqL,qBAA/B,CAAP,CAAT,EAAwE;IAChIxI,EAAE,EAAEA,EAD4H;IAEhIvC,GAAG,EAAE+D,SAF2H;IAGhI7D,EAAE,EAAEuB,QAH4H;IAIhIL,UAAU,EAAEA,UAJoH;IAKhIJ,QAAQ,EAAEA,QALsH;IAMhI+B,OAAO,EAAEnE,qBAAqB,CAACwI,WAAD,EAAcrE,OAAd,CANkG;IAOhI6D,SAAS,EAAEY,eAPqH;IAQhIlG,SAAS,EAAEA,SAAS,IAAI,CAACN,QARuG;IAShI8D,QAAQ,EAAEA,QATsH;IAUhItB,MAAM,EAAEA,MAVwH;IAWhIlB,SAAS,EAAEA,SAXqH;IAYhI8I,UAAU,EAAExJ,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqCA,KAArC,GAA6C;EAZuE,CAAxE,CAA1C,EAaZ+I,eAAe,KAAKnJ,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,KAAK,CAAnC,GAAuC,KAAK,CAA5C,GAAgDA,MAAM,CAACT,WAA5D,CAbH,CAHA,CAPI,CAApB;AAwBD,CAxe2B,CAA5B;AAyeAlB,QAAQ,CAACwL,WAAT,GAAuB,UAAvB;AACAxL,QAAQ,CAACyL,SAAT,GAAqB7N,QAAQ,CAAC,EAAD,EAAKkC,mBAAL,EAA0B;EACrDuB,kBAAkB,EAAElD,SAAS,CAACuN,KADuB;EAErD/J,MAAM,EAAExD,SAAS,CAACwN,GAFmC;EAGrDpK,UAAU,EAAEpD,SAAS,CAACyN,KAAV,CAAgB,CAAC,SAAD,EAAY,QAAZ,CAAhB,CAHyC;EAIrD9I,UAAU,EAAE3E,SAAS,CAAC0N,IAJ+B;EAKrDzI,QAAQ,EAAEjF,SAAS,CAAC0N,IALiC;EAMrDxI,QAAQ,EAAElF,SAAS,CAAC0N,IANiC;EAOrDpK,SAAS,EAAEtD,SAAS,CAAC2N,IAPgC;EAQrDnJ,cAAc,EAAExE,SAAS,CAAC0N,IAR2B;EASrDjJ,gBAAgB,EAAEzE,SAAS,CAAC0N,IATyB;EAUrD1J,SAAS,EAAEhE,SAAS,CAAC4N,MAVgC;EAWrD3J,UAAU,EAAEjE,SAAS,CAAC6N,SAAV,CAAoB,CAAC7N,SAAS,CAAC4N,MAAX,EAAmB5N,SAAS,CAAC8N,MAA7B,CAApB,CAXyC;EAYrD3J,UAAU,EAAEnE,SAAS,CAAC2N,IAZ+B;EAarD9J,MAAM,EAAE7D,SAAS,CAAC2N,IAbmC;EAcrDvJ,gBAAgB,EAAEpE,SAAS,CAAC2N;AAdyB,CAA1B,CAA7B;AAgBA,eAAe9L,QAAf"},"metadata":{},"sourceType":"module"}