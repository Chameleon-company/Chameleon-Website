{"ast":null,"code":"import { useRef, useCallback, useEffect } from 'react';\nimport getHeight from 'dom-lib/getHeight';\nimport addStyle from 'dom-lib/addStyle';\nimport removeStyle from 'dom-lib/removeStyle';\nimport on from 'dom-lib/on';\nimport toggleClass from './toggleClass';\nimport isNumberOrTrue from './isNumberOrTrue';\nimport useUpdateEffect from './useUpdateEffect';\n\nvar useAffix = function useAffix(props) {\n  var getTableHeight = props.getTableHeight,\n      contentHeight = props.contentHeight,\n      affixHorizontalScrollbar = props.affixHorizontalScrollbar,\n      affixHeader = props.affixHeader,\n      tableOffset = props.tableOffset,\n      headerOffset = props.headerOffset,\n      headerHeight = props.headerHeight,\n      scrollbarXRef = props.scrollbarXRef,\n      affixHeaderWrapperRef = props.affixHeaderWrapperRef;\n  var scrollListener = useRef();\n  var handleAffixHorizontalScrollbar = useCallback(function () {\n    var _tableOffset$current, _scrollbarXRef$curren;\n\n    var scrollY = window.scrollY || window.pageYOffset;\n    var windowHeight = getHeight(window);\n    var height = getTableHeight();\n    var bottom = typeof affixHorizontalScrollbar === 'number' ? affixHorizontalScrollbar : 0;\n    var offsetTop = ((_tableOffset$current = tableOffset.current) === null || _tableOffset$current === void 0 ? void 0 : _tableOffset$current.top) || 0;\n    var fixedScrollbar = scrollY + windowHeight < height + (offsetTop + bottom) && scrollY + windowHeight - headerHeight > offsetTop + bottom;\n\n    if (scrollbarXRef !== null && scrollbarXRef !== void 0 && (_scrollbarXRef$curren = scrollbarXRef.current) !== null && _scrollbarXRef$curren !== void 0 && _scrollbarXRef$curren.root) {\n      toggleClass(scrollbarXRef.current.root, 'fixed', fixedScrollbar);\n\n      if (fixedScrollbar) {\n        addStyle(scrollbarXRef.current.root, 'bottom', bottom + \"px\");\n      } else {\n        removeStyle(scrollbarXRef.current.root, 'bottom');\n      }\n    }\n  }, [affixHorizontalScrollbar, headerHeight, scrollbarXRef, getTableHeight, tableOffset]);\n  var handleAffixTableHeader = useCallback(function () {\n    var _headerOffset$current;\n\n    var top = typeof affixHeader === 'number' ? affixHeader : 0;\n    var scrollY = window.scrollY || window.pageYOffset;\n    var offsetTop = ((_headerOffset$current = headerOffset.current) === null || _headerOffset$current === void 0 ? void 0 : _headerOffset$current.top) || 0;\n    var fixedHeader = scrollY - (offsetTop - top) >= 0 && scrollY < offsetTop - top + contentHeight.current;\n\n    if (affixHeaderWrapperRef.current) {\n      toggleClass(affixHeaderWrapperRef.current, 'fixed', fixedHeader);\n    }\n  }, [affixHeader, affixHeaderWrapperRef, contentHeight, headerOffset]);\n  var handleWindowScroll = useCallback(function () {\n    if (isNumberOrTrue(affixHeader)) {\n      handleAffixTableHeader();\n    }\n\n    if (isNumberOrTrue(affixHorizontalScrollbar)) {\n      handleAffixHorizontalScrollbar();\n    }\n  }, [affixHeader, affixHorizontalScrollbar, handleAffixTableHeader, handleAffixHorizontalScrollbar]);\n  /**\n   * Update the position of the fixed element after the height of the table changes.\n   * fix: https://github.com/rsuite/rsuite/issues/1716\n   */\n\n  useUpdateEffect(handleWindowScroll, [getTableHeight]);\n  useEffect(function () {\n    if (isNumberOrTrue(affixHeader) || isNumberOrTrue(affixHorizontalScrollbar)) {\n      scrollListener.current = on(window, 'scroll', handleWindowScroll);\n    }\n\n    return function () {\n      var _scrollListener$curre;\n\n      (_scrollListener$curre = scrollListener.current) === null || _scrollListener$curre === void 0 ? void 0 : _scrollListener$curre.off();\n    };\n  }, [affixHeader, affixHorizontalScrollbar, handleWindowScroll]);\n};\n\nexport default useAffix;","map":{"version":3,"names":["useRef","useCallback","useEffect","getHeight","addStyle","removeStyle","on","toggleClass","isNumberOrTrue","useUpdateEffect","useAffix","props","getTableHeight","contentHeight","affixHorizontalScrollbar","affixHeader","tableOffset","headerOffset","headerHeight","scrollbarXRef","affixHeaderWrapperRef","scrollListener","handleAffixHorizontalScrollbar","_tableOffset$current","_scrollbarXRef$curren","scrollY","window","pageYOffset","windowHeight","height","bottom","offsetTop","current","top","fixedScrollbar","root","handleAffixTableHeader","_headerOffset$current","fixedHeader","handleWindowScroll","_scrollListener$curre","off"],"sources":["C:/Users/61420/Desktop/chameleon-website/node_modules/rsuite-table/es/utils/useAffix.js"],"sourcesContent":["import { useRef, useCallback, useEffect } from 'react';\nimport getHeight from 'dom-lib/getHeight';\nimport addStyle from 'dom-lib/addStyle';\nimport removeStyle from 'dom-lib/removeStyle';\nimport on from 'dom-lib/on';\nimport toggleClass from './toggleClass';\nimport isNumberOrTrue from './isNumberOrTrue';\nimport useUpdateEffect from './useUpdateEffect';\n\nvar useAffix = function useAffix(props) {\n  var getTableHeight = props.getTableHeight,\n      contentHeight = props.contentHeight,\n      affixHorizontalScrollbar = props.affixHorizontalScrollbar,\n      affixHeader = props.affixHeader,\n      tableOffset = props.tableOffset,\n      headerOffset = props.headerOffset,\n      headerHeight = props.headerHeight,\n      scrollbarXRef = props.scrollbarXRef,\n      affixHeaderWrapperRef = props.affixHeaderWrapperRef;\n  var scrollListener = useRef();\n  var handleAffixHorizontalScrollbar = useCallback(function () {\n    var _tableOffset$current, _scrollbarXRef$curren;\n\n    var scrollY = window.scrollY || window.pageYOffset;\n    var windowHeight = getHeight(window);\n    var height = getTableHeight();\n    var bottom = typeof affixHorizontalScrollbar === 'number' ? affixHorizontalScrollbar : 0;\n    var offsetTop = ((_tableOffset$current = tableOffset.current) === null || _tableOffset$current === void 0 ? void 0 : _tableOffset$current.top) || 0;\n    var fixedScrollbar = scrollY + windowHeight < height + (offsetTop + bottom) && scrollY + windowHeight - headerHeight > offsetTop + bottom;\n\n    if (scrollbarXRef !== null && scrollbarXRef !== void 0 && (_scrollbarXRef$curren = scrollbarXRef.current) !== null && _scrollbarXRef$curren !== void 0 && _scrollbarXRef$curren.root) {\n      toggleClass(scrollbarXRef.current.root, 'fixed', fixedScrollbar);\n\n      if (fixedScrollbar) {\n        addStyle(scrollbarXRef.current.root, 'bottom', bottom + \"px\");\n      } else {\n        removeStyle(scrollbarXRef.current.root, 'bottom');\n      }\n    }\n  }, [affixHorizontalScrollbar, headerHeight, scrollbarXRef, getTableHeight, tableOffset]);\n  var handleAffixTableHeader = useCallback(function () {\n    var _headerOffset$current;\n\n    var top = typeof affixHeader === 'number' ? affixHeader : 0;\n    var scrollY = window.scrollY || window.pageYOffset;\n    var offsetTop = ((_headerOffset$current = headerOffset.current) === null || _headerOffset$current === void 0 ? void 0 : _headerOffset$current.top) || 0;\n    var fixedHeader = scrollY - (offsetTop - top) >= 0 && scrollY < offsetTop - top + contentHeight.current;\n\n    if (affixHeaderWrapperRef.current) {\n      toggleClass(affixHeaderWrapperRef.current, 'fixed', fixedHeader);\n    }\n  }, [affixHeader, affixHeaderWrapperRef, contentHeight, headerOffset]);\n  var handleWindowScroll = useCallback(function () {\n    if (isNumberOrTrue(affixHeader)) {\n      handleAffixTableHeader();\n    }\n\n    if (isNumberOrTrue(affixHorizontalScrollbar)) {\n      handleAffixHorizontalScrollbar();\n    }\n  }, [affixHeader, affixHorizontalScrollbar, handleAffixTableHeader, handleAffixHorizontalScrollbar]);\n  /**\n   * Update the position of the fixed element after the height of the table changes.\n   * fix: https://github.com/rsuite/rsuite/issues/1716\n   */\n\n  useUpdateEffect(handleWindowScroll, [getTableHeight]);\n  useEffect(function () {\n    if (isNumberOrTrue(affixHeader) || isNumberOrTrue(affixHorizontalScrollbar)) {\n      scrollListener.current = on(window, 'scroll', handleWindowScroll);\n    }\n\n    return function () {\n      var _scrollListener$curre;\n\n      (_scrollListener$curre = scrollListener.current) === null || _scrollListener$curre === void 0 ? void 0 : _scrollListener$curre.off();\n    };\n  }, [affixHeader, affixHorizontalScrollbar, handleWindowScroll]);\n};\n\nexport default useAffix;"],"mappings":"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"},"metadata":{},"sourceType":"module"}