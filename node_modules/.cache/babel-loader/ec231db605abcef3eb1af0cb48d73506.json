{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNil from \"lodash/isNil\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _omit from \"lodash/omit\";\nimport _pick from \"lodash/pick\";\nimport React, { useState, useRef, useEffect, useCallback, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { List, AutoSizer } from '../Picker/VirtualizedList';\nimport TreeNode from './TreeNode';\nimport { getTreeNodeIndent } from '../utils/treeUtils';\nimport { createChainedFunction, useClassNames, useCustom, useControlled, TREE_NODE_DROP_POSITION, KEY_VALUES, mergeRefs, shallowEqual } from '../utils';\nimport { getExpandWhenSearching, hasVisibleChildren, getDragNodeKeys, calDropNodePosition, createUpdateTreeDataFunction, useTreeDrag, useFlattenTreeData, getTreeActiveNode, getDefaultExpandItemValues, useTreeNodeRefs, useTreeSearch, focusPreviousItem, getFocusableItems, focusNextItem, getActiveItem, toggleExpand, useGetTreeNodeChildren, focusToActiveTreeNode, leftArrowHandler, focusTreeNode, rightArrowHandler, isSearching } from '../utils/treeUtils';\nimport { PickerToggle, PickerOverlay, SearchBar, PickerToggleTrigger, createConcatChildrenFunction, usePickerClassName, onMenuKeyDown as _onMenuKeyDown, usePublicMethods, listPickerPropTypes, pickTriggerPropKeys, omitTriggerPropKeys, useToggleKeyDownEvent } from '../Picker';\nimport TreeContext from '../Tree/TreeContext'; // default value for virtualized\n\nexport var maxTreeHeight = 320;\nvar emptyArray = [];\nvar TreePicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$as = props.as,\n      Component = _props$as === void 0 ? 'div' : _props$as,\n      _props$data = props.data,\n      data = _props$data === void 0 ? emptyArray : _props$data,\n      _props$appearance = props.appearance,\n      appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n      style = props.style,\n      showIndentLine = props.showIndentLine,\n      controlledValue = props.value,\n      overrideLocale = props.locale,\n      _props$height = props.height,\n      height = _props$height === void 0 ? 360 : _props$height,\n      className = props.className,\n      disabled = props.disabled,\n      _props$placement = props.placement,\n      placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n      _props$cleanable = props.cleanable,\n      cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n      menuStyle = props.menuStyle,\n      _props$searchable = props.searchable,\n      searchable = _props$searchable === void 0 ? true : _props$searchable,\n      _props$virtualized = props.virtualized,\n      virtualized = _props$virtualized === void 0 ? false : _props$virtualized,\n      _props$classPrefix = props.classPrefix,\n      classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n      defaultValue = props.defaultValue,\n      placeholder = props.placeholder,\n      searchKeyword = props.searchKeyword,\n      menuClassName = props.menuClassName,\n      _props$menuAutoWidth = props.menuAutoWidth,\n      menuAutoWidth = _props$menuAutoWidth === void 0 ? true : _props$menuAutoWidth,\n      searchBy = props.searchBy,\n      toggleAs = props.toggleAs,\n      _props$labelKey = props.labelKey,\n      labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\n      _props$valueKey = props.valueKey,\n      valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n      _props$childrenKey = props.childrenKey,\n      childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\n      draggable = props.draggable,\n      _props$defaultExpandA = props.defaultExpandAll,\n      defaultExpandAll = _props$defaultExpandA === void 0 ? false : _props$defaultExpandA,\n      _props$disabledItemVa = props.disabledItemValues,\n      disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\n      controlledExpandItemValues = props.expandItemValues,\n      _props$defaultExpandI = props.defaultExpandItemValues,\n      defaultExpandItemValues = _props$defaultExpandI === void 0 ? emptyArray : _props$defaultExpandI,\n      id = props.id,\n      listProps = props.listProps,\n      getChildren = props.getChildren,\n      renderTreeIcon = props.renderTreeIcon,\n      renderTreeNode = props.renderTreeNode,\n      onExit = props.onExit,\n      onExited = props.onExited,\n      onClean = props.onClean,\n      onOpen = props.onOpen,\n      onSearch = props.onSearch,\n      onSelect = props.onSelect,\n      onChange = props.onChange,\n      onEntered = props.onEntered,\n      onClose = props.onClose,\n      onDragEnd = props.onDragEnd,\n      onDragStart = props.onDragStart,\n      onDragEnter = props.onDragEnter,\n      onDragLeave = props.onDragLeave,\n      onDragOver = props.onDragOver,\n      onDrop = props.onDrop,\n      onExpand = props.onExpand,\n      renderExtraFooter = props.renderExtraFooter,\n      renderMenu = props.renderMenu,\n      renderValue = props.renderValue,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"appearance\", \"style\", \"showIndentLine\", \"value\", \"locale\", \"height\", \"className\", \"disabled\", \"placement\", \"cleanable\", \"menuStyle\", \"searchable\", \"virtualized\", \"classPrefix\", \"defaultValue\", \"placeholder\", \"searchKeyword\", \"menuClassName\", \"menuAutoWidth\", \"searchBy\", \"toggleAs\", \"labelKey\", \"valueKey\", \"childrenKey\", \"draggable\", \"defaultExpandAll\", \"disabledItemValues\", \"expandItemValues\", \"defaultExpandItemValues\", \"id\", \"listProps\", \"getChildren\", \"renderTreeIcon\", \"renderTreeNode\", \"onExit\", \"onExited\", \"onClean\", \"onOpen\", \"onSearch\", \"onSelect\", \"onChange\", \"onEntered\", \"onClose\", \"onDragEnd\", \"onDragStart\", \"onDragEnter\", \"onDragLeave\", \"onDragOver\", \"onDrop\", \"onExpand\", \"renderExtraFooter\", \"renderMenu\", \"renderValue\"]);\n\n  var triggerRef = useRef(null);\n  var targetRef = useRef(null);\n  var listRef = useRef(null);\n  var overlayRef = useRef(null);\n  var searchInputRef = useRef(null);\n  var treeViewRef = useRef(null);\n\n  var _useCustom = useCustom('Picker', overrideLocale),\n      rtl = _useCustom.rtl,\n      locale = _useCustom.locale;\n\n  var _useContext = useContext(TreeContext),\n      inline = _useContext.inline;\n\n  var _useControlled = useControlled(controlledValue, defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1],\n      isControlled = _useControlled[2];\n\n  var _useGetTreeNodeChildr = useGetTreeNodeChildren(data, valueKey, childrenKey),\n      treeData = _useGetTreeNodeChildr.data,\n      setTreeData = _useGetTreeNodeChildr.setData,\n      loadingNodeValues = _useGetTreeNodeChildr.loadingNodeValues,\n      loadChildren = _useGetTreeNodeChildr.loadChildren;\n\n  var _useControlled2 = useControlled(controlledExpandItemValues, getDefaultExpandItemValues(treeData, {\n    defaultExpandAll: defaultExpandAll,\n    valueKey: valueKey,\n    childrenKey: childrenKey,\n    defaultExpandItemValues: defaultExpandItemValues\n  })),\n      expandItemValues = _useControlled2[0],\n      setExpandItemValues = _useControlled2[1];\n\n  var _useState = useState(false),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useState2 = useState(null),\n      focusItemValue = _useState2[0],\n      setFocusItemValue = _useState2[1];\n\n  var _useFlattenTreeData = useFlattenTreeData({\n    data: treeData,\n    labelKey: labelKey,\n    valueKey: valueKey,\n    childrenKey: childrenKey,\n    callback: function callback() {\n      // after flattenData, always trigger re-render\n      forceUpdate();\n    }\n  }),\n      flattenNodes = _useFlattenTreeData.flattenNodes,\n      forceUpdate = _useFlattenTreeData.forceUpdate,\n      formatVirtualizedTreeData = _useFlattenTreeData.formatVirtualizedTreeData;\n\n  var _useClassNames = useClassNames(classPrefix),\n      prefix = _useClassNames.prefix,\n      merge = _useClassNames.merge;\n\n  var _useClassNames2 = useClassNames('tree'),\n      treePrefix = _useClassNames2.prefix,\n      withTreeClassPrefix = _useClassNames2.withClassPrefix;\n\n  var _useTreeSearch = useTreeSearch({\n    labelKey: labelKey,\n    childrenKey: childrenKey,\n    searchKeyword: searchKeyword,\n    data: treeData,\n    searchBy: searchBy,\n    callback: function callback(searchKeyword, _filterData, event) {\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n    }\n  }),\n      filteredData = _useTreeSearch.filteredData,\n      searchKeywordState = _useTreeSearch.searchKeywordState,\n      setSearchKeyword = _useTreeSearch.setSearchKeyword,\n      handleSearch = _useTreeSearch.handleSearch,\n      setFilteredData = _useTreeSearch.setFilteredData;\n\n  var _useTreeDrag = useTreeDrag(),\n      dragNodeKeys = _useTreeDrag.dragNodeKeys,\n      dragOverNodeKey = _useTreeDrag.dragOverNodeKey,\n      dragNode = _useTreeDrag.dragNode,\n      dropNodePosition = _useTreeDrag.dropNodePosition,\n      setDragNodeKeys = _useTreeDrag.setDragNodeKeys,\n      setDragOverNodeKey = _useTreeDrag.setDragOverNodeKey,\n      setDragNode = _useTreeDrag.setDragNode,\n      setDropNodePosition = _useTreeDrag.setDropNodePosition;\n\n  var _useTreeNodeRefs = useTreeNodeRefs(),\n      treeNodesRefs = _useTreeNodeRefs.treeNodesRefs,\n      saveTreeNodeRef = _useTreeNodeRefs.saveTreeNodeRef;\n\n  var activeNode = getTreeActiveNode(flattenNodes, value, valueKey);\n  var getFormattedNodes = useCallback(function (render) {\n    if (virtualized) {\n      return formatVirtualizedTreeData(flattenNodes, filteredData, expandItemValues, {\n        searchKeyword: searchKeywordState\n      }).filter(function (n) {\n        return n.visible;\n      });\n    }\n\n    return filteredData.map(function (dataItem, index) {\n      return render === null || render === void 0 ? void 0 : render(dataItem, index, 1);\n    });\n  }, [searchKeywordState, expandItemValues, filteredData, flattenNodes, formatVirtualizedTreeData, virtualized]);\n  var focusActiveNode = useCallback(function () {\n    if (listRef.current) {\n      focusToActiveTreeNode({\n        list: listRef.current,\n        valueKey: valueKey,\n        selector: \".\" + treePrefix('node-active'),\n        activeNode: activeNode,\n        virtualized: virtualized,\n        container: treeViewRef.current,\n        formattedNodes: getFormattedNodes()\n      });\n    }\n  }, [treePrefix, activeNode, getFormattedNodes, valueKey, virtualized]);\n  useEffect(function () {\n    setFilteredData(data, searchKeywordState);\n    setTreeData(data);\n  }, [data, searchKeywordState, setFilteredData, setTreeData]);\n  useEffect(function () {\n    setFilteredData(treeData, searchKeywordState);\n  }, [treeData, searchKeywordState, setFilteredData]);\n  useEffect(function () {\n    if (Array.isArray(controlledExpandItemValues)) {\n      setExpandItemValues(controlledExpandItemValues);\n    }\n  }, [controlledExpandItemValues, setExpandItemValues]);\n  useEffect(function () {\n    setSearchKeyword(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : '');\n  }, [searchKeyword, setSearchKeyword]);\n  var getDropData = useCallback(function (nodeData) {\n    var options = {\n      valueKey: valueKey,\n      childrenKey: childrenKey\n    };\n    return {\n      /** draggingNode */\n      dragNode: dragNode,\n\n      /** dropNode */\n      dropNode: nodeData,\n\n      /** dragAndDrop Position type */\n      dropNodePosition: dropNodePosition,\n      createUpdateDataFunction: createUpdateTreeDataFunction({\n        dragNode: dragNode,\n        dropNode: nodeData,\n        dropNodePosition: dropNodePosition\n      }, options)\n    };\n  }, [dragNode, valueKey, childrenKey, dropNodePosition]);\n\n  var getTreeNodeProps = function getTreeNodeProps(node, layer, index) {\n    var draggingNode = dragNode !== null && dragNode !== void 0 ? dragNode : {};\n    return {\n      as: Component,\n      rtl: rtl,\n      value: node[valueKey],\n      label: node[labelKey],\n      index: index,\n      layer: layer,\n      loading: loadingNodeValues.some(function (item) {\n        return shallowEqual(item, node[valueKey]);\n      }),\n      expand: node.expand,\n      active: shallowEqual(node[valueKey], value),\n      focus: shallowEqual(node[valueKey], focusItemValue),\n      visible: node.visible,\n      draggable: draggable,\n      dragging: shallowEqual(node[valueKey], draggingNode[valueKey]),\n      children: node[childrenKey],\n      nodeData: node,\n      disabled: disabledItemValues.some(function (disabledItem) {\n        return shallowEqual(disabledItem, node[valueKey]);\n      }),\n      dragOver: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER,\n      dragOverTop: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER_TOP,\n      dragOverBottom: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER_BOTTOM,\n      onSelect: handleSelect,\n      onDragStart: handleDragStart,\n      onDragEnter: handleDragEnter,\n      onDragOver: handleDragOver,\n      onDragLeave: handleDragLeave,\n      onDragEnd: handleDragEnd,\n      onDrop: handleDrop,\n      onExpand: handleExpand,\n      onRenderTreeNode: renderTreeNode,\n      onRenderTreeIcon: renderTreeIcon\n    };\n  };\n\n  var handleSelect = useCallback(function (nodeData, event) {\n    var _targetRef$current, _triggerRef$current, _triggerRef$current$c;\n\n    if (!nodeData) {\n      return;\n    }\n\n    var nodeValue = nodeData[valueKey];\n\n    if (!isControlled) {\n      setValue(nodeValue);\n    }\n\n    setFocusItemValue(nodeData[valueKey]);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nodeValue, event);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(nodeData, nodeValue, event);\n    (_targetRef$current = targetRef.current) === null || _targetRef$current === void 0 ? void 0 : _targetRef$current.focus();\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$c = _triggerRef$current.close) === null || _triggerRef$current$c === void 0 ? void 0 : _triggerRef$current$c.call(_triggerRef$current);\n  }, [valueKey, isControlled, onChange, onSelect, setValue]);\n  var handleExpand = useCallback(function (node) {\n    var nextExpandItemValues = toggleExpand({\n      node: node,\n      isExpand: !node.expand,\n      expandItemValues: expandItemValues,\n      valueKey: valueKey\n    });\n    setExpandItemValues(nextExpandItemValues);\n    onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\n      valueKey: valueKey,\n      childrenKey: childrenKey\n    }));\n\n    if (_isFunction(getChildren) && !node.expand && Array.isArray(node[childrenKey]) && node[childrenKey].length === 0) {\n      loadChildren(node, getChildren);\n    }\n  }, [valueKey, childrenKey, expandItemValues, getChildren, onExpand, setExpandItemValues, loadChildren]);\n  var handleDragStart = useCallback(function (nodeData, event) {\n    if (draggable) {\n      setDragNodeKeys(getDragNodeKeys(nodeData, childrenKey, valueKey));\n      setDragNode(flattenNodes[nodeData.refKey]);\n      onDragStart === null || onDragStart === void 0 ? void 0 : onDragStart(nodeData, event);\n    }\n  }, [draggable, childrenKey, flattenNodes, onDragStart, setDragNodeKeys, setDragNode, valueKey]);\n  var handleDragEnter = useCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      return;\n    }\n\n    if (dragNode) {\n      setDragOverNodeKey(nodeData[valueKey]);\n      setDropNodePosition(calDropNodePosition(event, treeNodesRefs[nodeData.refKey]));\n    }\n\n    onDragEnter === null || onDragEnter === void 0 ? void 0 : onDragEnter(nodeData, event);\n  }, [dragNode, treeNodesRefs, dragNodeKeys, onDragEnter, setDragOverNodeKey, setDropNodePosition, valueKey]);\n  var handleDragOver = useCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      return;\n    }\n\n    if (dragNode && shallowEqual(nodeData[valueKey], dragOverNodeKey)) {\n      var lastDropNodePosition = calDropNodePosition(event, treeNodesRefs[nodeData.refKey]);\n      if (lastDropNodePosition === dropNodePosition) return;\n      setDropNodePosition(lastDropNodePosition);\n    }\n\n    onDragOver === null || onDragOver === void 0 ? void 0 : onDragOver(nodeData, event);\n  }, [dragNode, dragNodeKeys, dragOverNodeKey, dropNodePosition, onDragOver, setDropNodePosition, treeNodesRefs, valueKey]);\n  var handleDragLeave = useCallback(function (nodeData, event) {\n    onDragLeave === null || onDragLeave === void 0 ? void 0 : onDragLeave(nodeData, event);\n  }, [onDragLeave]);\n  var handleDragEnd = useCallback(function (nodeData, event) {\n    setDragNode(null);\n    setDragNodeKeys([]);\n    setDragOverNodeKey(null);\n    onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd(nodeData, event);\n  }, [setDragNode, setDragNodeKeys, setDragOverNodeKey, onDragEnd]);\n  var handleDrop = useCallback(function (nodeData, event) {\n    if (dragNodeKeys.some(function (d) {\n      return shallowEqual(d, nodeData[valueKey]);\n    })) {\n      console.error('Cannot drag a node to itself and its children');\n    } else {\n      var dropData = getDropData(nodeData);\n      onDrop === null || onDrop === void 0 ? void 0 : onDrop(dropData, event);\n    }\n\n    setDragNode(null);\n    setDragNodeKeys([]);\n    setDragOverNodeKey(null);\n  }, [dragNodeKeys, setDragNode, setDragOverNodeKey, setDragNodeKeys, onDrop, getDropData, valueKey]);\n  var handleOpen = useCallback(function () {\n    var _triggerRef$current2, _triggerRef$current2$;\n\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : (_triggerRef$current2$ = _triggerRef$current2.open) === null || _triggerRef$current2$ === void 0 ? void 0 : _triggerRef$current2$.call(_triggerRef$current2);\n    focusActiveNode();\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\n    setActive(true);\n  }, [focusActiveNode, onOpen]);\n  var handleClose = useCallback(function () {\n    var _triggerRef$current3, _triggerRef$current3$, _targetRef$current2;\n\n    (_triggerRef$current3 = triggerRef.current) === null || _triggerRef$current3 === void 0 ? void 0 : (_triggerRef$current3$ = _triggerRef$current3.close) === null || _triggerRef$current3$ === void 0 ? void 0 : _triggerRef$current3$.call(_triggerRef$current3);\n    setSearchKeyword('');\n    setActive(false);\n    setFocusItemValue(activeNode === null || activeNode === void 0 ? void 0 : activeNode[valueKey]);\n    /**\r\n     * when using keyboard toggle picker, should refocus on PickerToggle Component after close picker menu\r\n     */\n\n    (_targetRef$current2 = targetRef.current) === null || _targetRef$current2 === void 0 ? void 0 : _targetRef$current2.focus();\n  }, [activeNode, setSearchKeyword, valueKey]);\n  usePublicMethods(ref, {\n    rootRef: inline ? treeViewRef : undefined,\n    triggerRef: triggerRef,\n    overlayRef: overlayRef,\n    targetRef: targetRef,\n    listRef: listRef,\n    inline: inline\n  });\n  var handleFocusItem = useCallback(function (key) {\n    var focusableItems = getFocusableItems(filteredData, {\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      expandItemValues: expandItemValues\n    }, isSearching(searchKeywordState));\n    var selector = \".\" + treePrefix('node-label');\n    var focusProps = {\n      focusItemValue: focusItemValue,\n      focusableItems: focusableItems,\n      treeNodesRefs: treeNodesRefs,\n      selector: selector,\n      valueKey: valueKey,\n      callback: function callback(nextFocusItemValue) {\n        setFocusItemValue(nextFocusItemValue);\n      }\n    };\n\n    if (key === KEY_VALUES.DOWN) {\n      focusNextItem(focusProps);\n      return;\n    }\n\n    if (key === KEY_VALUES.UP) {\n      focusPreviousItem(focusProps);\n    }\n  }, [searchKeywordState, expandItemValues, filteredData, focusItemValue, treeNodesRefs, treePrefix, valueKey, childrenKey, disabledItemValues]);\n  var handleLeftArrow = useCallback(function () {\n    if (_isNil(focusItemValue)) return;\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    leftArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      onExpand: handleExpand,\n      childrenKey: childrenKey,\n      onFocusItem: function onFocusItem() {\n        var _focusItem$parent, _focusItem$parent2;\n\n        setFocusItemValue(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey]);\n        focusTreeNode(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent2 = focusItem.parent) === null || _focusItem$parent2 === void 0 ? void 0 : _focusItem$parent2.refKey, treeNodesRefs, \".\" + treePrefix('node-label'));\n      }\n    });\n  }, [expandItemValues, flattenNodes, focusItemValue, handleExpand, treeNodesRefs, treePrefix, valueKey, childrenKey]);\n  var handleRightArrow = useCallback(function () {\n    if (_isNil(focusItemValue)) return;\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    rightArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      childrenKey: childrenKey,\n      onExpand: handleExpand,\n      onFocusItem: function onFocusItem() {\n        handleFocusItem(KEY_VALUES.DOWN);\n      }\n    });\n  }, [focusItemValue, flattenNodes, valueKey, expandItemValues, childrenKey, handleExpand, handleFocusItem]);\n  var selectActiveItem = useCallback(function (event) {\n    if (_isNil(focusItemValue)) return;\n    var activeItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    handleSelect(activeItem, event);\n  }, [flattenNodes, valueKey, focusItemValue, handleSelect]);\n  var handleClean = useCallback(function (event) {\n    var nullValue = null;\n    var target = event.target; // exclude searchBar\n\n    if (target.matches('div[role=\"searchbox\"] > input')) {\n      return;\n    }\n\n    setValue(null);\n    onChange === null || onChange === void 0 ? void 0 : onChange(nullValue, event);\n  }, [onChange, setValue]);\n  var onPickerKeydown = useToggleKeyDownEvent(_extends({\n    toggle: !activeNode || !active,\n    triggerRef: triggerRef,\n    targetRef: targetRef,\n    overlayRef: overlayRef,\n    searchInputRef: searchInputRef,\n    active: active,\n    onExit: handleClean,\n    onClose: handleClose,\n    onMenuKeyDown: function onMenuKeyDown(event) {\n      _onMenuKeyDown(event, {\n        down: function down() {\n          return handleFocusItem(KEY_VALUES.DOWN);\n        },\n        up: function up() {\n          return handleFocusItem(KEY_VALUES.UP);\n        },\n        left: rtl ? handleRightArrow : handleLeftArrow,\n        right: rtl ? handleLeftArrow : handleRightArrow,\n        enter: selectActiveItem,\n        del: handleClean\n      });\n    }\n  }, rest));\n  var handleTreeKeyDown = useCallback(function (event) {\n    if (!treeViewRef.current) {\n      return;\n    }\n\n    _onMenuKeyDown(event, {\n      down: function down() {\n        return handleFocusItem(KEY_VALUES.DOWN);\n      },\n      up: function up() {\n        return handleFocusItem(KEY_VALUES.UP);\n      },\n      left: rtl ? handleRightArrow : handleLeftArrow,\n      right: rtl ? handleLeftArrow : handleRightArrow,\n      enter: selectActiveItem\n    });\n  }, [handleFocusItem, handleLeftArrow, handleRightArrow, rtl, selectActiveItem]);\n\n  var renderNode = function renderNode(node, index, layer) {\n    if (!node.visible) {\n      return null;\n    }\n\n    var children = node[childrenKey];\n    var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n    var visibleChildren = _isUndefined(searchKeywordState) || searchKeywordState.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\n\n    var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n      expand: expand\n    }), layer, index), {\n      hasChildren: visibleChildren\n    });\n\n    if (nodeProps.hasChildren) {\n      var _merge;\n\n      layer += 1;\n      var openClass = treePrefix('open');\n      var childrenClass = merge(treePrefix('node-children'), (_merge = {}, _merge[openClass] = expand && visibleChildren, _merge));\n      var nodes = children || [];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: childrenClass,\n        key: node[valueKey]\n      }, /*#__PURE__*/React.createElement(TreeNode, _extends({}, nodeProps, {\n        ref: function ref(_ref) {\n          return saveTreeNodeRef(_ref, node.refKey);\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: treePrefix('children')\n      }, nodes.map(function (child, i) {\n        return renderNode(child, i, layer);\n      }), showIndentLine && /*#__PURE__*/React.createElement(\"span\", {\n        className: treePrefix('indent-line'),\n        style: getTreeNodeIndent(rtl, layer - 1, true)\n      })));\n    }\n\n    return /*#__PURE__*/React.createElement(TreeNode, _extends({\n      ref: function ref(_ref2) {\n        return saveTreeNodeRef(_ref2, node.refKey);\n      },\n      key: node[valueKey]\n    }, nodeProps));\n  };\n\n  var renderVirtualListNode = function renderVirtualListNode(nodes) {\n    return function (_ref3) {\n      var key = _ref3.key,\n          index = _ref3.index,\n          style = _ref3.style;\n      var node = nodes[index];\n      var layer = node.layer,\n          visible = node.visible;\n      var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n\n      if (!node.visible) {\n        return null;\n      }\n\n      var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n        expand: expand\n      }), layer), {\n        style: style,\n        hasChildren: node.hasChildren\n      });\n\n      return visible && /*#__PURE__*/React.createElement(TreeNode, _extends({\n        ref: function ref(_ref4) {\n          return saveTreeNodeRef(_ref4, node.refKey);\n        },\n        key: key\n      }, nodeProps));\n    };\n  };\n\n  var renderTree = function renderTree() {\n    var _withTreeClassPrefix;\n\n    var classes = withTreeClassPrefix((_withTreeClassPrefix = {}, _withTreeClassPrefix[className !== null && className !== void 0 ? className : ''] = inline, _withTreeClassPrefix.virtualized = virtualized, _withTreeClassPrefix));\n    var formattedNodes = getFormattedNodes(renderNode);\n    var styles = inline ? _extends({\n      height: height\n    }, style) : {};\n    return /*#__PURE__*/React.createElement(\"div\", {\n      role: \"tree\",\n      id: id ? id + \"-listbox\" : undefined,\n      ref: treeViewRef,\n      className: classes,\n      style: styles,\n      onKeyDown: inline ? handleTreeKeyDown : undefined\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: treePrefix('nodes')\n    }, virtualized ? /*#__PURE__*/React.createElement(AutoSizer, {\n      defaultHeight: inline ? height : maxTreeHeight,\n      style: {\n        width: 'auto',\n        height: 'auto'\n      }\n    }, function (_ref5) {\n      var height = _ref5.height,\n          width = _ref5.width;\n      return /*#__PURE__*/React.createElement(List, _extends({\n        ref: listRef,\n        width: width,\n        height: height,\n        rowHeight: 36,\n        rowCount: formattedNodes.length,\n        rowRenderer: renderVirtualListNode(formattedNodes),\n        scrollToAlignment: \"center\"\n      }, listProps));\n    }) : formattedNodes));\n  };\n\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var left = positionProps.left,\n        top = positionProps.top,\n        className = positionProps.className;\n    var classes = merge(className, menuClassName, prefix('tree-menu'));\n\n    var mergedMenuStyle = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n\n    var styles = virtualized ? _extends({\n      height: height\n    }, mergedMenuStyle) : _extends({}, mergedMenuStyle);\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: styles,\n      ref: mergeRefs(overlayRef, speakerRef),\n      onKeyDown: onPickerKeydown,\n      target: triggerRef\n    }, searchable ? /*#__PURE__*/React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeywordState,\n      inputRef: searchInputRef\n    }) : null, renderMenu ? renderMenu(renderTree()) : renderTree(), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n  /**\r\n   * 1.Have a value and the value is valid.\r\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\r\n   */\n\n\n  var hasValidValue = !_isNil(activeNode) || !_isNil(value) && _isFunction(renderValue);\n\n  var selectedElement = placeholder;\n\n  if (hasValidValue) {\n    var node = activeNode !== null && activeNode !== void 0 ? activeNode : {};\n    selectedElement = node[labelKey];\n\n    if (_isFunction(renderValue) && value) {\n      selectedElement = renderValue(value, node, selectedElement);\n\n      if (_isNil(selectedElement)) {\n        hasValidValue = false;\n      }\n    }\n  }\n\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n    classPrefix: classPrefix,\n    appearance: appearance,\n    hasValue: hasValidValue,\n    name: 'tree',\n    cleanable: cleanable\n  })),\n      classes = _usePickerClassName[0],\n      usedClassNamePropKeys = _usePickerClassName[1];\n\n  if (inline) {\n    return renderTree();\n  }\n\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    pickerProps: _pick(props, pickTriggerPropKeys),\n    ref: triggerRef,\n    placement: placement,\n    onEnter: handleOpen,\n    onEntered: onEntered,\n    onExit: createChainedFunction(onClose, onExit),\n    onExited: createChainedFunction(handleClose, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, _omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys, ['cascade'])), {\n    id: id,\n    ref: targetRef,\n    appearance: appearance,\n    onKeyDown: onPickerKeydown,\n    onClean: createChainedFunction(handleClean, onClean),\n    cleanable: cleanable && !disabled,\n    as: toggleAs,\n    disabled: disabled,\n    hasValue: hasValidValue,\n    active: active,\n    placement: placement,\n    inputValue: value\n  }), selectedElement || locale.placeholder)));\n});\nTreePicker.displayName = 'TreePicker';\nTreePicker.propTypes = _extends({}, listPickerPropTypes, {\n  locale: PropTypes.any,\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  height: PropTypes.number,\n  draggable: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchable: PropTypes.bool,\n  menuAutoWidth: PropTypes.bool,\n  searchKeyword: PropTypes.string,\n  defaultExpandAll: PropTypes.bool,\n  expandItemValues: PropTypes.array,\n  defaultExpandItemValues: PropTypes.array,\n  onSearch: PropTypes.func,\n  onExpand: PropTypes.func,\n  onSelect: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderTreeNode: PropTypes.func,\n  renderTreeIcon: PropTypes.func,\n  renderExtraFooter: PropTypes.func,\n  renderDragNode: PropTypes.func,\n  searchBy: PropTypes.func\n});\nexport default TreePicker;","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","_isFunction","_isNil","_isUndefined","_omit","_pick","React","useState","useRef","useEffect","useCallback","useContext","PropTypes","List","AutoSizer","TreeNode","getTreeNodeIndent","createChainedFunction","useClassNames","useCustom","useControlled","TREE_NODE_DROP_POSITION","KEY_VALUES","mergeRefs","shallowEqual","getExpandWhenSearching","hasVisibleChildren","getDragNodeKeys","calDropNodePosition","createUpdateTreeDataFunction","useTreeDrag","useFlattenTreeData","getTreeActiveNode","getDefaultExpandItemValues","useTreeNodeRefs","useTreeSearch","focusPreviousItem","getFocusableItems","focusNextItem","getActiveItem","toggleExpand","useGetTreeNodeChildren","focusToActiveTreeNode","leftArrowHandler","focusTreeNode","rightArrowHandler","isSearching","PickerToggle","PickerOverlay","SearchBar","PickerToggleTrigger","createConcatChildrenFunction","usePickerClassName","onMenuKeyDown","_onMenuKeyDown","usePublicMethods","listPickerPropTypes","pickTriggerPropKeys","omitTriggerPropKeys","useToggleKeyDownEvent","TreeContext","maxTreeHeight","emptyArray","TreePicker","forwardRef","props","ref","_props$as","as","Component","_props$data","data","_props$appearance","appearance","style","showIndentLine","controlledValue","value","overrideLocale","locale","_props$height","height","className","disabled","_props$placement","placement","_props$cleanable","cleanable","menuStyle","_props$searchable","searchable","_props$virtualized","virtualized","_props$classPrefix","classPrefix","defaultValue","placeholder","searchKeyword","menuClassName","_props$menuAutoWidth","menuAutoWidth","searchBy","toggleAs","_props$labelKey","labelKey","_props$valueKey","valueKey","_props$childrenKey","childrenKey","draggable","_props$defaultExpandA","defaultExpandAll","_props$disabledItemVa","disabledItemValues","controlledExpandItemValues","expandItemValues","_props$defaultExpandI","defaultExpandItemValues","id","listProps","getChildren","renderTreeIcon","renderTreeNode","onExit","onExited","onClean","onOpen","onSearch","onSelect","onChange","onEntered","onClose","onDragEnd","onDragStart","onDragEnter","onDragLeave","onDragOver","onDrop","onExpand","renderExtraFooter","renderMenu","renderValue","rest","triggerRef","targetRef","listRef","overlayRef","searchInputRef","treeViewRef","_useCustom","rtl","_useContext","inline","_useControlled","setValue","isControlled","_useGetTreeNodeChildr","treeData","setTreeData","setData","loadingNodeValues","loadChildren","_useControlled2","setExpandItemValues","_useState","active","setActive","_useState2","focusItemValue","setFocusItemValue","_useFlattenTreeData","callback","forceUpdate","flattenNodes","formatVirtualizedTreeData","_useClassNames","prefix","merge","_useClassNames2","treePrefix","withTreeClassPrefix","withClassPrefix","_useTreeSearch","_filterData","event","filteredData","searchKeywordState","setSearchKeyword","handleSearch","setFilteredData","_useTreeDrag","dragNodeKeys","dragOverNodeKey","dragNode","dropNodePosition","setDragNodeKeys","setDragOverNodeKey","setDragNode","setDropNodePosition","_useTreeNodeRefs","treeNodesRefs","saveTreeNodeRef","activeNode","getFormattedNodes","render","filter","n","visible","map","dataItem","index","focusActiveNode","current","list","selector","container","formattedNodes","Array","isArray","getDropData","nodeData","options","dropNode","createUpdateDataFunction","getTreeNodeProps","node","layer","draggingNode","label","loading","some","item","expand","focus","dragging","children","disabledItem","dragOver","DRAG_OVER","dragOverTop","DRAG_OVER_TOP","dragOverBottom","DRAG_OVER_BOTTOM","handleSelect","handleDragStart","handleDragEnter","handleDragOver","handleDragLeave","handleDragEnd","handleDrop","handleExpand","onRenderTreeNode","onRenderTreeIcon","_targetRef$current","_triggerRef$current","_triggerRef$current$c","nodeValue","close","call","nextExpandItemValues","isExpand","length","refKey","d","lastDropNodePosition","console","error","dropData","handleOpen","_triggerRef$current2","_triggerRef$current2$","open","handleClose","_triggerRef$current3","_triggerRef$current3$","_targetRef$current2","rootRef","undefined","handleFocusItem","key","focusableItems","focusProps","nextFocusItemValue","DOWN","UP","handleLeftArrow","focusItem","includes","onFocusItem","_focusItem$parent","_focusItem$parent2","parent","handleRightArrow","selectActiveItem","activeItem","handleClean","nullValue","target","matches","onPickerKeydown","toggle","down","up","left","right","enter","del","handleTreeKeyDown","renderNode","visibleChildren","nodeProps","hasChildren","_merge","openClass","childrenClass","nodes","createElement","_ref","child","i","_ref2","renderVirtualListNode","_ref3","_ref4","renderTree","_withTreeClassPrefix","classes","styles","role","onKeyDown","defaultHeight","width","_ref5","rowHeight","rowCount","rowRenderer","scrollToAlignment","renderDropdownMenu","positionProps","speakerRef","top","mergedMenuStyle","autoWidth","searchPlaceholder","inputRef","hasValidValue","selectedElement","_usePickerClassName","hasValue","name","usedClassNamePropKeys","pickerProps","onEnter","speaker","concat","inputValue","displayName","propTypes","any","oneOf","number","bool","string","array","func","renderDragNode"],"sources":["C:/Users/jaink/OneDrive/Desktop/New folder (4)/chameleon-website/node_modules/rsuite/esm/TreePicker/TreePicker.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\r\nimport _isFunction from \"lodash/isFunction\";\r\nimport _isNil from \"lodash/isNil\";\r\nimport _isUndefined from \"lodash/isUndefined\";\r\nimport _omit from \"lodash/omit\";\r\nimport _pick from \"lodash/pick\";\r\nimport React, { useState, useRef, useEffect, useCallback, useContext } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { List, AutoSizer } from '../Picker/VirtualizedList';\r\nimport TreeNode from './TreeNode';\r\nimport { getTreeNodeIndent } from '../utils/treeUtils';\r\nimport { createChainedFunction, useClassNames, useCustom, useControlled, TREE_NODE_DROP_POSITION, KEY_VALUES, mergeRefs, shallowEqual } from '../utils';\r\nimport { getExpandWhenSearching, hasVisibleChildren, getDragNodeKeys, calDropNodePosition, createUpdateTreeDataFunction, useTreeDrag, useFlattenTreeData, getTreeActiveNode, getDefaultExpandItemValues, useTreeNodeRefs, useTreeSearch, focusPreviousItem, getFocusableItems, focusNextItem, getActiveItem, toggleExpand, useGetTreeNodeChildren, focusToActiveTreeNode, leftArrowHandler, focusTreeNode, rightArrowHandler, isSearching } from '../utils/treeUtils';\r\nimport { PickerToggle, PickerOverlay, SearchBar, PickerToggleTrigger, createConcatChildrenFunction, usePickerClassName, onMenuKeyDown as _onMenuKeyDown, usePublicMethods, listPickerPropTypes, pickTriggerPropKeys, omitTriggerPropKeys, useToggleKeyDownEvent } from '../Picker';\r\nimport TreeContext from '../Tree/TreeContext'; // default value for virtualized\r\n\r\nexport var maxTreeHeight = 320;\r\nvar emptyArray = [];\r\nvar TreePicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\r\n  var _props$as = props.as,\r\n      Component = _props$as === void 0 ? 'div' : _props$as,\r\n      _props$data = props.data,\r\n      data = _props$data === void 0 ? emptyArray : _props$data,\r\n      _props$appearance = props.appearance,\r\n      appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\r\n      style = props.style,\r\n      showIndentLine = props.showIndentLine,\r\n      controlledValue = props.value,\r\n      overrideLocale = props.locale,\r\n      _props$height = props.height,\r\n      height = _props$height === void 0 ? 360 : _props$height,\r\n      className = props.className,\r\n      disabled = props.disabled,\r\n      _props$placement = props.placement,\r\n      placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\r\n      _props$cleanable = props.cleanable,\r\n      cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\r\n      menuStyle = props.menuStyle,\r\n      _props$searchable = props.searchable,\r\n      searchable = _props$searchable === void 0 ? true : _props$searchable,\r\n      _props$virtualized = props.virtualized,\r\n      virtualized = _props$virtualized === void 0 ? false : _props$virtualized,\r\n      _props$classPrefix = props.classPrefix,\r\n      classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\r\n      defaultValue = props.defaultValue,\r\n      placeholder = props.placeholder,\r\n      searchKeyword = props.searchKeyword,\r\n      menuClassName = props.menuClassName,\r\n      _props$menuAutoWidth = props.menuAutoWidth,\r\n      menuAutoWidth = _props$menuAutoWidth === void 0 ? true : _props$menuAutoWidth,\r\n      searchBy = props.searchBy,\r\n      toggleAs = props.toggleAs,\r\n      _props$labelKey = props.labelKey,\r\n      labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\r\n      _props$valueKey = props.valueKey,\r\n      valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\r\n      _props$childrenKey = props.childrenKey,\r\n      childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\r\n      draggable = props.draggable,\r\n      _props$defaultExpandA = props.defaultExpandAll,\r\n      defaultExpandAll = _props$defaultExpandA === void 0 ? false : _props$defaultExpandA,\r\n      _props$disabledItemVa = props.disabledItemValues,\r\n      disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\r\n      controlledExpandItemValues = props.expandItemValues,\r\n      _props$defaultExpandI = props.defaultExpandItemValues,\r\n      defaultExpandItemValues = _props$defaultExpandI === void 0 ? emptyArray : _props$defaultExpandI,\r\n      id = props.id,\r\n      listProps = props.listProps,\r\n      getChildren = props.getChildren,\r\n      renderTreeIcon = props.renderTreeIcon,\r\n      renderTreeNode = props.renderTreeNode,\r\n      onExit = props.onExit,\r\n      onExited = props.onExited,\r\n      onClean = props.onClean,\r\n      onOpen = props.onOpen,\r\n      onSearch = props.onSearch,\r\n      onSelect = props.onSelect,\r\n      onChange = props.onChange,\r\n      onEntered = props.onEntered,\r\n      onClose = props.onClose,\r\n      onDragEnd = props.onDragEnd,\r\n      onDragStart = props.onDragStart,\r\n      onDragEnter = props.onDragEnter,\r\n      onDragLeave = props.onDragLeave,\r\n      onDragOver = props.onDragOver,\r\n      onDrop = props.onDrop,\r\n      onExpand = props.onExpand,\r\n      renderExtraFooter = props.renderExtraFooter,\r\n      renderMenu = props.renderMenu,\r\n      renderValue = props.renderValue,\r\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"appearance\", \"style\", \"showIndentLine\", \"value\", \"locale\", \"height\", \"className\", \"disabled\", \"placement\", \"cleanable\", \"menuStyle\", \"searchable\", \"virtualized\", \"classPrefix\", \"defaultValue\", \"placeholder\", \"searchKeyword\", \"menuClassName\", \"menuAutoWidth\", \"searchBy\", \"toggleAs\", \"labelKey\", \"valueKey\", \"childrenKey\", \"draggable\", \"defaultExpandAll\", \"disabledItemValues\", \"expandItemValues\", \"defaultExpandItemValues\", \"id\", \"listProps\", \"getChildren\", \"renderTreeIcon\", \"renderTreeNode\", \"onExit\", \"onExited\", \"onClean\", \"onOpen\", \"onSearch\", \"onSelect\", \"onChange\", \"onEntered\", \"onClose\", \"onDragEnd\", \"onDragStart\", \"onDragEnter\", \"onDragLeave\", \"onDragOver\", \"onDrop\", \"onExpand\", \"renderExtraFooter\", \"renderMenu\", \"renderValue\"]);\r\n\r\n  var triggerRef = useRef(null);\r\n  var targetRef = useRef(null);\r\n  var listRef = useRef(null);\r\n  var overlayRef = useRef(null);\r\n  var searchInputRef = useRef(null);\r\n  var treeViewRef = useRef(null);\r\n\r\n  var _useCustom = useCustom('Picker', overrideLocale),\r\n      rtl = _useCustom.rtl,\r\n      locale = _useCustom.locale;\r\n\r\n  var _useContext = useContext(TreeContext),\r\n      inline = _useContext.inline;\r\n\r\n  var _useControlled = useControlled(controlledValue, defaultValue),\r\n      value = _useControlled[0],\r\n      setValue = _useControlled[1],\r\n      isControlled = _useControlled[2];\r\n\r\n  var _useGetTreeNodeChildr = useGetTreeNodeChildren(data, valueKey, childrenKey),\r\n      treeData = _useGetTreeNodeChildr.data,\r\n      setTreeData = _useGetTreeNodeChildr.setData,\r\n      loadingNodeValues = _useGetTreeNodeChildr.loadingNodeValues,\r\n      loadChildren = _useGetTreeNodeChildr.loadChildren;\r\n\r\n  var _useControlled2 = useControlled(controlledExpandItemValues, getDefaultExpandItemValues(treeData, {\r\n    defaultExpandAll: defaultExpandAll,\r\n    valueKey: valueKey,\r\n    childrenKey: childrenKey,\r\n    defaultExpandItemValues: defaultExpandItemValues\r\n  })),\r\n      expandItemValues = _useControlled2[0],\r\n      setExpandItemValues = _useControlled2[1];\r\n\r\n  var _useState = useState(false),\r\n      active = _useState[0],\r\n      setActive = _useState[1];\r\n\r\n  var _useState2 = useState(null),\r\n      focusItemValue = _useState2[0],\r\n      setFocusItemValue = _useState2[1];\r\n\r\n  var _useFlattenTreeData = useFlattenTreeData({\r\n    data: treeData,\r\n    labelKey: labelKey,\r\n    valueKey: valueKey,\r\n    childrenKey: childrenKey,\r\n    callback: function callback() {\r\n      // after flattenData, always trigger re-render\r\n      forceUpdate();\r\n    }\r\n  }),\r\n      flattenNodes = _useFlattenTreeData.flattenNodes,\r\n      forceUpdate = _useFlattenTreeData.forceUpdate,\r\n      formatVirtualizedTreeData = _useFlattenTreeData.formatVirtualizedTreeData;\r\n\r\n  var _useClassNames = useClassNames(classPrefix),\r\n      prefix = _useClassNames.prefix,\r\n      merge = _useClassNames.merge;\r\n\r\n  var _useClassNames2 = useClassNames('tree'),\r\n      treePrefix = _useClassNames2.prefix,\r\n      withTreeClassPrefix = _useClassNames2.withClassPrefix;\r\n\r\n  var _useTreeSearch = useTreeSearch({\r\n    labelKey: labelKey,\r\n    childrenKey: childrenKey,\r\n    searchKeyword: searchKeyword,\r\n    data: treeData,\r\n    searchBy: searchBy,\r\n    callback: function callback(searchKeyword, _filterData, event) {\r\n      onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\r\n    }\r\n  }),\r\n      filteredData = _useTreeSearch.filteredData,\r\n      searchKeywordState = _useTreeSearch.searchKeywordState,\r\n      setSearchKeyword = _useTreeSearch.setSearchKeyword,\r\n      handleSearch = _useTreeSearch.handleSearch,\r\n      setFilteredData = _useTreeSearch.setFilteredData;\r\n\r\n  var _useTreeDrag = useTreeDrag(),\r\n      dragNodeKeys = _useTreeDrag.dragNodeKeys,\r\n      dragOverNodeKey = _useTreeDrag.dragOverNodeKey,\r\n      dragNode = _useTreeDrag.dragNode,\r\n      dropNodePosition = _useTreeDrag.dropNodePosition,\r\n      setDragNodeKeys = _useTreeDrag.setDragNodeKeys,\r\n      setDragOverNodeKey = _useTreeDrag.setDragOverNodeKey,\r\n      setDragNode = _useTreeDrag.setDragNode,\r\n      setDropNodePosition = _useTreeDrag.setDropNodePosition;\r\n\r\n  var _useTreeNodeRefs = useTreeNodeRefs(),\r\n      treeNodesRefs = _useTreeNodeRefs.treeNodesRefs,\r\n      saveTreeNodeRef = _useTreeNodeRefs.saveTreeNodeRef;\r\n\r\n  var activeNode = getTreeActiveNode(flattenNodes, value, valueKey);\r\n  var getFormattedNodes = useCallback(function (render) {\r\n    if (virtualized) {\r\n      return formatVirtualizedTreeData(flattenNodes, filteredData, expandItemValues, {\r\n        searchKeyword: searchKeywordState\r\n      }).filter(function (n) {\r\n        return n.visible;\r\n      });\r\n    }\r\n\r\n    return filteredData.map(function (dataItem, index) {\r\n      return render === null || render === void 0 ? void 0 : render(dataItem, index, 1);\r\n    });\r\n  }, [searchKeywordState, expandItemValues, filteredData, flattenNodes, formatVirtualizedTreeData, virtualized]);\r\n  var focusActiveNode = useCallback(function () {\r\n    if (listRef.current) {\r\n      focusToActiveTreeNode({\r\n        list: listRef.current,\r\n        valueKey: valueKey,\r\n        selector: \".\" + treePrefix('node-active'),\r\n        activeNode: activeNode,\r\n        virtualized: virtualized,\r\n        container: treeViewRef.current,\r\n        formattedNodes: getFormattedNodes()\r\n      });\r\n    }\r\n  }, [treePrefix, activeNode, getFormattedNodes, valueKey, virtualized]);\r\n  useEffect(function () {\r\n    setFilteredData(data, searchKeywordState);\r\n    setTreeData(data);\r\n  }, [data, searchKeywordState, setFilteredData, setTreeData]);\r\n  useEffect(function () {\r\n    setFilteredData(treeData, searchKeywordState);\r\n  }, [treeData, searchKeywordState, setFilteredData]);\r\n  useEffect(function () {\r\n    if (Array.isArray(controlledExpandItemValues)) {\r\n      setExpandItemValues(controlledExpandItemValues);\r\n    }\r\n  }, [controlledExpandItemValues, setExpandItemValues]);\r\n  useEffect(function () {\r\n    setSearchKeyword(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : '');\r\n  }, [searchKeyword, setSearchKeyword]);\r\n  var getDropData = useCallback(function (nodeData) {\r\n    var options = {\r\n      valueKey: valueKey,\r\n      childrenKey: childrenKey\r\n    };\r\n    return {\r\n      /** draggingNode */\r\n      dragNode: dragNode,\r\n\r\n      /** dropNode */\r\n      dropNode: nodeData,\r\n\r\n      /** dragAndDrop Position type */\r\n      dropNodePosition: dropNodePosition,\r\n      createUpdateDataFunction: createUpdateTreeDataFunction({\r\n        dragNode: dragNode,\r\n        dropNode: nodeData,\r\n        dropNodePosition: dropNodePosition\r\n      }, options)\r\n    };\r\n  }, [dragNode, valueKey, childrenKey, dropNodePosition]);\r\n\r\n  var getTreeNodeProps = function getTreeNodeProps(node, layer, index) {\r\n    var draggingNode = dragNode !== null && dragNode !== void 0 ? dragNode : {};\r\n    return {\r\n      as: Component,\r\n      rtl: rtl,\r\n      value: node[valueKey],\r\n      label: node[labelKey],\r\n      index: index,\r\n      layer: layer,\r\n      loading: loadingNodeValues.some(function (item) {\r\n        return shallowEqual(item, node[valueKey]);\r\n      }),\r\n      expand: node.expand,\r\n      active: shallowEqual(node[valueKey], value),\r\n      focus: shallowEqual(node[valueKey], focusItemValue),\r\n      visible: node.visible,\r\n      draggable: draggable,\r\n      dragging: shallowEqual(node[valueKey], draggingNode[valueKey]),\r\n      children: node[childrenKey],\r\n      nodeData: node,\r\n      disabled: disabledItemValues.some(function (disabledItem) {\r\n        return shallowEqual(disabledItem, node[valueKey]);\r\n      }),\r\n      dragOver: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER,\r\n      dragOverTop: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER_TOP,\r\n      dragOverBottom: shallowEqual(node[valueKey], dragOverNodeKey) && dropNodePosition === TREE_NODE_DROP_POSITION.DRAG_OVER_BOTTOM,\r\n      onSelect: handleSelect,\r\n      onDragStart: handleDragStart,\r\n      onDragEnter: handleDragEnter,\r\n      onDragOver: handleDragOver,\r\n      onDragLeave: handleDragLeave,\r\n      onDragEnd: handleDragEnd,\r\n      onDrop: handleDrop,\r\n      onExpand: handleExpand,\r\n      onRenderTreeNode: renderTreeNode,\r\n      onRenderTreeIcon: renderTreeIcon\r\n    };\r\n  };\r\n\r\n  var handleSelect = useCallback(function (nodeData, event) {\r\n    var _targetRef$current, _triggerRef$current, _triggerRef$current$c;\r\n\r\n    if (!nodeData) {\r\n      return;\r\n    }\r\n\r\n    var nodeValue = nodeData[valueKey];\r\n\r\n    if (!isControlled) {\r\n      setValue(nodeValue);\r\n    }\r\n\r\n    setFocusItemValue(nodeData[valueKey]);\r\n    onChange === null || onChange === void 0 ? void 0 : onChange(nodeValue, event);\r\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(nodeData, nodeValue, event);\r\n    (_targetRef$current = targetRef.current) === null || _targetRef$current === void 0 ? void 0 : _targetRef$current.focus();\r\n    (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$c = _triggerRef$current.close) === null || _triggerRef$current$c === void 0 ? void 0 : _triggerRef$current$c.call(_triggerRef$current);\r\n  }, [valueKey, isControlled, onChange, onSelect, setValue]);\r\n  var handleExpand = useCallback(function (node) {\r\n    var nextExpandItemValues = toggleExpand({\r\n      node: node,\r\n      isExpand: !node.expand,\r\n      expandItemValues: expandItemValues,\r\n      valueKey: valueKey\r\n    });\r\n    setExpandItemValues(nextExpandItemValues);\r\n    onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\r\n      valueKey: valueKey,\r\n      childrenKey: childrenKey\r\n    }));\r\n\r\n    if (_isFunction(getChildren) && !node.expand && Array.isArray(node[childrenKey]) && node[childrenKey].length === 0) {\r\n      loadChildren(node, getChildren);\r\n    }\r\n  }, [valueKey, childrenKey, expandItemValues, getChildren, onExpand, setExpandItemValues, loadChildren]);\r\n  var handleDragStart = useCallback(function (nodeData, event) {\r\n    if (draggable) {\r\n      setDragNodeKeys(getDragNodeKeys(nodeData, childrenKey, valueKey));\r\n      setDragNode(flattenNodes[nodeData.refKey]);\r\n      onDragStart === null || onDragStart === void 0 ? void 0 : onDragStart(nodeData, event);\r\n    }\r\n  }, [draggable, childrenKey, flattenNodes, onDragStart, setDragNodeKeys, setDragNode, valueKey]);\r\n  var handleDragEnter = useCallback(function (nodeData, event) {\r\n    if (dragNodeKeys.some(function (d) {\r\n      return shallowEqual(d, nodeData[valueKey]);\r\n    })) {\r\n      return;\r\n    }\r\n\r\n    if (dragNode) {\r\n      setDragOverNodeKey(nodeData[valueKey]);\r\n      setDropNodePosition(calDropNodePosition(event, treeNodesRefs[nodeData.refKey]));\r\n    }\r\n\r\n    onDragEnter === null || onDragEnter === void 0 ? void 0 : onDragEnter(nodeData, event);\r\n  }, [dragNode, treeNodesRefs, dragNodeKeys, onDragEnter, setDragOverNodeKey, setDropNodePosition, valueKey]);\r\n  var handleDragOver = useCallback(function (nodeData, event) {\r\n    if (dragNodeKeys.some(function (d) {\r\n      return shallowEqual(d, nodeData[valueKey]);\r\n    })) {\r\n      return;\r\n    }\r\n\r\n    if (dragNode && shallowEqual(nodeData[valueKey], dragOverNodeKey)) {\r\n      var lastDropNodePosition = calDropNodePosition(event, treeNodesRefs[nodeData.refKey]);\r\n      if (lastDropNodePosition === dropNodePosition) return;\r\n      setDropNodePosition(lastDropNodePosition);\r\n    }\r\n\r\n    onDragOver === null || onDragOver === void 0 ? void 0 : onDragOver(nodeData, event);\r\n  }, [dragNode, dragNodeKeys, dragOverNodeKey, dropNodePosition, onDragOver, setDropNodePosition, treeNodesRefs, valueKey]);\r\n  var handleDragLeave = useCallback(function (nodeData, event) {\r\n    onDragLeave === null || onDragLeave === void 0 ? void 0 : onDragLeave(nodeData, event);\r\n  }, [onDragLeave]);\r\n  var handleDragEnd = useCallback(function (nodeData, event) {\r\n    setDragNode(null);\r\n    setDragNodeKeys([]);\r\n    setDragOverNodeKey(null);\r\n    onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd(nodeData, event);\r\n  }, [setDragNode, setDragNodeKeys, setDragOverNodeKey, onDragEnd]);\r\n  var handleDrop = useCallback(function (nodeData, event) {\r\n    if (dragNodeKeys.some(function (d) {\r\n      return shallowEqual(d, nodeData[valueKey]);\r\n    })) {\r\n      console.error('Cannot drag a node to itself and its children');\r\n    } else {\r\n      var dropData = getDropData(nodeData);\r\n      onDrop === null || onDrop === void 0 ? void 0 : onDrop(dropData, event);\r\n    }\r\n\r\n    setDragNode(null);\r\n    setDragNodeKeys([]);\r\n    setDragOverNodeKey(null);\r\n  }, [dragNodeKeys, setDragNode, setDragOverNodeKey, setDragNodeKeys, onDrop, getDropData, valueKey]);\r\n  var handleOpen = useCallback(function () {\r\n    var _triggerRef$current2, _triggerRef$current2$;\r\n\r\n    (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : (_triggerRef$current2$ = _triggerRef$current2.open) === null || _triggerRef$current2$ === void 0 ? void 0 : _triggerRef$current2$.call(_triggerRef$current2);\r\n    focusActiveNode();\r\n    onOpen === null || onOpen === void 0 ? void 0 : onOpen();\r\n    setActive(true);\r\n  }, [focusActiveNode, onOpen]);\r\n  var handleClose = useCallback(function () {\r\n    var _triggerRef$current3, _triggerRef$current3$, _targetRef$current2;\r\n\r\n    (_triggerRef$current3 = triggerRef.current) === null || _triggerRef$current3 === void 0 ? void 0 : (_triggerRef$current3$ = _triggerRef$current3.close) === null || _triggerRef$current3$ === void 0 ? void 0 : _triggerRef$current3$.call(_triggerRef$current3);\r\n    setSearchKeyword('');\r\n    setActive(false);\r\n    setFocusItemValue(activeNode === null || activeNode === void 0 ? void 0 : activeNode[valueKey]);\r\n    /**\r\n     * when using keyboard toggle picker, should refocus on PickerToggle Component after close picker menu\r\n     */\r\n\r\n    (_targetRef$current2 = targetRef.current) === null || _targetRef$current2 === void 0 ? void 0 : _targetRef$current2.focus();\r\n  }, [activeNode, setSearchKeyword, valueKey]);\r\n  usePublicMethods(ref, {\r\n    rootRef: inline ? treeViewRef : undefined,\r\n    triggerRef: triggerRef,\r\n    overlayRef: overlayRef,\r\n    targetRef: targetRef,\r\n    listRef: listRef,\r\n    inline: inline\r\n  });\r\n  var handleFocusItem = useCallback(function (key) {\r\n    var focusableItems = getFocusableItems(filteredData, {\r\n      disabledItemValues: disabledItemValues,\r\n      valueKey: valueKey,\r\n      childrenKey: childrenKey,\r\n      expandItemValues: expandItemValues\r\n    }, isSearching(searchKeywordState));\r\n    var selector = \".\" + treePrefix('node-label');\r\n    var focusProps = {\r\n      focusItemValue: focusItemValue,\r\n      focusableItems: focusableItems,\r\n      treeNodesRefs: treeNodesRefs,\r\n      selector: selector,\r\n      valueKey: valueKey,\r\n      callback: function callback(nextFocusItemValue) {\r\n        setFocusItemValue(nextFocusItemValue);\r\n      }\r\n    };\r\n\r\n    if (key === KEY_VALUES.DOWN) {\r\n      focusNextItem(focusProps);\r\n      return;\r\n    }\r\n\r\n    if (key === KEY_VALUES.UP) {\r\n      focusPreviousItem(focusProps);\r\n    }\r\n  }, [searchKeywordState, expandItemValues, filteredData, focusItemValue, treeNodesRefs, treePrefix, valueKey, childrenKey, disabledItemValues]);\r\n  var handleLeftArrow = useCallback(function () {\r\n    if (_isNil(focusItemValue)) return;\r\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\r\n    leftArrowHandler({\r\n      focusItem: focusItem,\r\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\r\n      onExpand: handleExpand,\r\n      childrenKey: childrenKey,\r\n      onFocusItem: function onFocusItem() {\r\n        var _focusItem$parent, _focusItem$parent2;\r\n\r\n        setFocusItemValue(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey]);\r\n        focusTreeNode(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent2 = focusItem.parent) === null || _focusItem$parent2 === void 0 ? void 0 : _focusItem$parent2.refKey, treeNodesRefs, \".\" + treePrefix('node-label'));\r\n      }\r\n    });\r\n  }, [expandItemValues, flattenNodes, focusItemValue, handleExpand, treeNodesRefs, treePrefix, valueKey, childrenKey]);\r\n  var handleRightArrow = useCallback(function () {\r\n    if (_isNil(focusItemValue)) return;\r\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\r\n    rightArrowHandler({\r\n      focusItem: focusItem,\r\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\r\n      childrenKey: childrenKey,\r\n      onExpand: handleExpand,\r\n      onFocusItem: function onFocusItem() {\r\n        handleFocusItem(KEY_VALUES.DOWN);\r\n      }\r\n    });\r\n  }, [focusItemValue, flattenNodes, valueKey, expandItemValues, childrenKey, handleExpand, handleFocusItem]);\r\n  var selectActiveItem = useCallback(function (event) {\r\n    if (_isNil(focusItemValue)) return;\r\n    var activeItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\r\n    handleSelect(activeItem, event);\r\n  }, [flattenNodes, valueKey, focusItemValue, handleSelect]);\r\n  var handleClean = useCallback(function (event) {\r\n    var nullValue = null;\r\n    var target = event.target; // exclude searchBar\r\n\r\n    if (target.matches('div[role=\"searchbox\"] > input')) {\r\n      return;\r\n    }\r\n\r\n    setValue(null);\r\n    onChange === null || onChange === void 0 ? void 0 : onChange(nullValue, event);\r\n  }, [onChange, setValue]);\r\n  var onPickerKeydown = useToggleKeyDownEvent(_extends({\r\n    toggle: !activeNode || !active,\r\n    triggerRef: triggerRef,\r\n    targetRef: targetRef,\r\n    overlayRef: overlayRef,\r\n    searchInputRef: searchInputRef,\r\n    active: active,\r\n    onExit: handleClean,\r\n    onClose: handleClose,\r\n    onMenuKeyDown: function onMenuKeyDown(event) {\r\n      _onMenuKeyDown(event, {\r\n        down: function down() {\r\n          return handleFocusItem(KEY_VALUES.DOWN);\r\n        },\r\n        up: function up() {\r\n          return handleFocusItem(KEY_VALUES.UP);\r\n        },\r\n        left: rtl ? handleRightArrow : handleLeftArrow,\r\n        right: rtl ? handleLeftArrow : handleRightArrow,\r\n        enter: selectActiveItem,\r\n        del: handleClean\r\n      });\r\n    }\r\n  }, rest));\r\n  var handleTreeKeyDown = useCallback(function (event) {\r\n    if (!treeViewRef.current) {\r\n      return;\r\n    }\r\n\r\n    _onMenuKeyDown(event, {\r\n      down: function down() {\r\n        return handleFocusItem(KEY_VALUES.DOWN);\r\n      },\r\n      up: function up() {\r\n        return handleFocusItem(KEY_VALUES.UP);\r\n      },\r\n      left: rtl ? handleRightArrow : handleLeftArrow,\r\n      right: rtl ? handleLeftArrow : handleRightArrow,\r\n      enter: selectActiveItem\r\n    });\r\n  }, [handleFocusItem, handleLeftArrow, handleRightArrow, rtl, selectActiveItem]);\r\n\r\n  var renderNode = function renderNode(node, index, layer) {\r\n    if (!node.visible) {\r\n      return null;\r\n    }\r\n\r\n    var children = node[childrenKey];\r\n    var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\r\n    var visibleChildren = _isUndefined(searchKeywordState) || searchKeywordState.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\r\n\r\n    var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\r\n      expand: expand\r\n    }), layer, index), {\r\n      hasChildren: visibleChildren\r\n    });\r\n\r\n    if (nodeProps.hasChildren) {\r\n      var _merge;\r\n\r\n      layer += 1;\r\n      var openClass = treePrefix('open');\r\n      var childrenClass = merge(treePrefix('node-children'), (_merge = {}, _merge[openClass] = expand && visibleChildren, _merge));\r\n      var nodes = children || [];\r\n      return /*#__PURE__*/React.createElement(\"div\", {\r\n        className: childrenClass,\r\n        key: node[valueKey]\r\n      }, /*#__PURE__*/React.createElement(TreeNode, _extends({}, nodeProps, {\r\n        ref: function ref(_ref) {\r\n          return saveTreeNodeRef(_ref, node.refKey);\r\n        }\r\n      })), /*#__PURE__*/React.createElement(\"div\", {\r\n        className: treePrefix('children')\r\n      }, nodes.map(function (child, i) {\r\n        return renderNode(child, i, layer);\r\n      }), showIndentLine && /*#__PURE__*/React.createElement(\"span\", {\r\n        className: treePrefix('indent-line'),\r\n        style: getTreeNodeIndent(rtl, layer - 1, true)\r\n      })));\r\n    }\r\n\r\n    return /*#__PURE__*/React.createElement(TreeNode, _extends({\r\n      ref: function ref(_ref2) {\r\n        return saveTreeNodeRef(_ref2, node.refKey);\r\n      },\r\n      key: node[valueKey]\r\n    }, nodeProps));\r\n  };\r\n\r\n  var renderVirtualListNode = function renderVirtualListNode(nodes) {\r\n    return function (_ref3) {\r\n      var key = _ref3.key,\r\n          index = _ref3.index,\r\n          style = _ref3.style;\r\n      var node = nodes[index];\r\n      var layer = node.layer,\r\n          visible = node.visible;\r\n      var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\r\n\r\n      if (!node.visible) {\r\n        return null;\r\n      }\r\n\r\n      var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\r\n        expand: expand\r\n      }), layer), {\r\n        style: style,\r\n        hasChildren: node.hasChildren\r\n      });\r\n\r\n      return visible && /*#__PURE__*/React.createElement(TreeNode, _extends({\r\n        ref: function ref(_ref4) {\r\n          return saveTreeNodeRef(_ref4, node.refKey);\r\n        },\r\n        key: key\r\n      }, nodeProps));\r\n    };\r\n  };\r\n\r\n  var renderTree = function renderTree() {\r\n    var _withTreeClassPrefix;\r\n\r\n    var classes = withTreeClassPrefix((_withTreeClassPrefix = {}, _withTreeClassPrefix[className !== null && className !== void 0 ? className : ''] = inline, _withTreeClassPrefix.virtualized = virtualized, _withTreeClassPrefix));\r\n    var formattedNodes = getFormattedNodes(renderNode);\r\n    var styles = inline ? _extends({\r\n      height: height\r\n    }, style) : {};\r\n    return /*#__PURE__*/React.createElement(\"div\", {\r\n      role: \"tree\",\r\n      id: id ? id + \"-listbox\" : undefined,\r\n      ref: treeViewRef,\r\n      className: classes,\r\n      style: styles,\r\n      onKeyDown: inline ? handleTreeKeyDown : undefined\r\n    }, /*#__PURE__*/React.createElement(\"div\", {\r\n      className: treePrefix('nodes')\r\n    }, virtualized ? /*#__PURE__*/React.createElement(AutoSizer, {\r\n      defaultHeight: inline ? height : maxTreeHeight,\r\n      style: {\r\n        width: 'auto',\r\n        height: 'auto'\r\n      }\r\n    }, function (_ref5) {\r\n      var height = _ref5.height,\r\n          width = _ref5.width;\r\n      return /*#__PURE__*/React.createElement(List, _extends({\r\n        ref: listRef,\r\n        width: width,\r\n        height: height,\r\n        rowHeight: 36,\r\n        rowCount: formattedNodes.length,\r\n        rowRenderer: renderVirtualListNode(formattedNodes),\r\n        scrollToAlignment: \"center\"\r\n      }, listProps));\r\n    }) : formattedNodes));\r\n  };\r\n\r\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\r\n    var left = positionProps.left,\r\n        top = positionProps.top,\r\n        className = positionProps.className;\r\n    var classes = merge(className, menuClassName, prefix('tree-menu'));\r\n\r\n    var mergedMenuStyle = _extends({}, menuStyle, {\r\n      left: left,\r\n      top: top\r\n    });\r\n\r\n    var styles = virtualized ? _extends({\r\n      height: height\r\n    }, mergedMenuStyle) : _extends({}, mergedMenuStyle);\r\n    return /*#__PURE__*/React.createElement(PickerOverlay, {\r\n      autoWidth: menuAutoWidth,\r\n      className: classes,\r\n      style: styles,\r\n      ref: mergeRefs(overlayRef, speakerRef),\r\n      onKeyDown: onPickerKeydown,\r\n      target: triggerRef\r\n    }, searchable ? /*#__PURE__*/React.createElement(SearchBar, {\r\n      placeholder: locale.searchPlaceholder,\r\n      onChange: handleSearch,\r\n      value: searchKeywordState,\r\n      inputRef: searchInputRef\r\n    }) : null, renderMenu ? renderMenu(renderTree()) : renderTree(), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\r\n  };\r\n  /**\r\n   * 1.Have a value and the value is valid.\r\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\r\n   */\r\n\r\n\r\n  var hasValidValue = !_isNil(activeNode) || !_isNil(value) && _isFunction(renderValue);\r\n\r\n  var selectedElement = placeholder;\r\n\r\n  if (hasValidValue) {\r\n    var node = activeNode !== null && activeNode !== void 0 ? activeNode : {};\r\n    selectedElement = node[labelKey];\r\n\r\n    if (_isFunction(renderValue) && value) {\r\n      selectedElement = renderValue(value, node, selectedElement);\r\n\r\n      if (_isNil(selectedElement)) {\r\n        hasValidValue = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\r\n    classPrefix: classPrefix,\r\n    appearance: appearance,\r\n    hasValue: hasValidValue,\r\n    name: 'tree',\r\n    cleanable: cleanable\r\n  })),\r\n      classes = _usePickerClassName[0],\r\n      usedClassNamePropKeys = _usePickerClassName[1];\r\n\r\n  if (inline) {\r\n    return renderTree();\r\n  }\r\n\r\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\r\n    pickerProps: _pick(props, pickTriggerPropKeys),\r\n    ref: triggerRef,\r\n    placement: placement,\r\n    onEnter: handleOpen,\r\n    onEntered: onEntered,\r\n    onExit: createChainedFunction(onClose, onExit),\r\n    onExited: createChainedFunction(handleClose, onExited),\r\n    speaker: renderDropdownMenu\r\n  }, /*#__PURE__*/React.createElement(Component, {\r\n    className: classes,\r\n    style: style\r\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, _omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys, ['cascade'])), {\r\n    id: id,\r\n    ref: targetRef,\r\n    appearance: appearance,\r\n    onKeyDown: onPickerKeydown,\r\n    onClean: createChainedFunction(handleClean, onClean),\r\n    cleanable: cleanable && !disabled,\r\n    as: toggleAs,\r\n    disabled: disabled,\r\n    hasValue: hasValidValue,\r\n    active: active,\r\n    placement: placement,\r\n    inputValue: value\r\n  }), selectedElement || locale.placeholder)));\r\n});\r\nTreePicker.displayName = 'TreePicker';\r\nTreePicker.propTypes = _extends({}, listPickerPropTypes, {\r\n  locale: PropTypes.any,\r\n  appearance: PropTypes.oneOf(['default', 'subtle']),\r\n  height: PropTypes.number,\r\n  draggable: PropTypes.bool,\r\n  virtualized: PropTypes.bool,\r\n  searchable: PropTypes.bool,\r\n  menuAutoWidth: PropTypes.bool,\r\n  searchKeyword: PropTypes.string,\r\n  defaultExpandAll: PropTypes.bool,\r\n  expandItemValues: PropTypes.array,\r\n  defaultExpandItemValues: PropTypes.array,\r\n  onSearch: PropTypes.func,\r\n  onExpand: PropTypes.func,\r\n  onSelect: PropTypes.func,\r\n  renderMenu: PropTypes.func,\r\n  renderTreeNode: PropTypes.func,\r\n  renderTreeIcon: PropTypes.func,\r\n  renderExtraFooter: PropTypes.func,\r\n  renderDragNode: PropTypes.func,\r\n  searchBy: PropTypes.func\r\n});\r\nexport default TreePicker;"],"mappings":"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"},"metadata":{},"sourceType":"module"}